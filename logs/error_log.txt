2025-05-24 21:29:49,394 - WARNING - Empty resource loaded: diagnosis_relevance.json
2025-05-24 21:29:49,406 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:29:50,341 - ERROR - Failed to initialize Medspacy: [E007] 'medspacy_context' already exists in pipeline. Existing names: ['tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner', 'medspacy_pyrush', 'medspacy_target_matcher', 'medspacy_context']
2025-05-24 21:29:50,342 - ERROR - Failed to get shared NLP pipeline: [E007] 'medspacy_context' already exists in pipeline. Existing names: ['tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner', 'medspacy_pyrush', 'medspacy_target_matcher', 'medspacy_context']. Falling back to regex negation.
2025-05-24 21:29:51,183 - ERROR - Failed to initialize Medspacy: [E966] `nlp.add_pipe` now takes the string name of the registered component factory, not a callable component. Expected string, but got <medspacy.context.context.ConText object at 0x7b59405c5290> (name: 'medspacy_context').

- If you created your component with `nlp.create_pipe('name')`: remove nlp.create_pipe and call `nlp.add_pipe('name')` instead.

- If you passed in a component like `TextCategorizer()`: call `nlp.add_pipe` with the string name instead, e.g. `nlp.add_pipe('textcat')`.

- If you're using a custom component: Add the decorator `@Language.component` (for function components) or `@Language.factory` (for class components / factories) to your custom component and assign it a name, e.g. `@Language.component('your_name')`. You can then run `nlp.add_pipe('your_name')` to add it to the pipeline.
2025-05-24 21:29:51,196 - ERROR - Error extracting features for note ID 1: extract_aggravating_alleviating() missing 1 required positional argument: 'factor'
2025-05-24 21:29:51,225 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:29:52,067 - ERROR - Failed to initialize Medspacy: [E007] 'medspacy_context' already exists in pipeline. Existing names: ['tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner', 'medspacy_pyrush', 'medspacy_target_matcher', 'medspacy_context']
2025-05-24 21:29:52,067 - ERROR - Failed to get shared NLP pipeline: [E007] 'medspacy_context' already exists in pipeline. Existing names: ['tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner', 'medspacy_pyrush', 'medspacy_target_matcher', 'medspacy_context']. Falling back to regex negation.
2025-05-24 21:29:52,918 - ERROR - Failed to initialize Medspacy: [E966] `nlp.add_pipe` now takes the string name of the registered component factory, not a callable component. Expected string, but got <medspacy.context.context.ConText object at 0x7b592176b4d0> (name: 'medspacy_context').

- If you created your component with `nlp.create_pipe('name')`: remove nlp.create_pipe and call `nlp.add_pipe('name')` instead.

- If you passed in a component like `TextCategorizer()`: call `nlp.add_pipe` with the string name instead, e.g. `nlp.add_pipe('textcat')`.

- If you're using a custom component: Add the decorator `@Language.component` (for function components) or `@Language.factory` (for class components / factories) to your custom component and assign it a name, e.g. `@Language.component('your_name')`. You can then run `nlp.add_pipe('your_name')` to add it to the pipeline.
2025-05-24 21:29:52,921 - WARNING - Missing symptoms: ['patient presents with facial pain, nasal congestion, and fever for 10 days. reports purulent nasal discharge.']. Initiating knowledge base update.
2025-05-24 21:29:52,921 - ERROR - Error extracting features for note ID 1: extract_aggravating_alleviating() missing 1 required positional argument: 'factor'
2025-05-24 21:29:52,951 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:29:53,801 - ERROR - Failed to initialize Medspacy: [E007] 'medspacy_context' already exists in pipeline. Existing names: ['tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner', 'medspacy_pyrush', 'medspacy_target_matcher', 'medspacy_context']
2025-05-24 21:29:53,801 - ERROR - Failed to get shared NLP pipeline: [E007] 'medspacy_context' already exists in pipeline. Existing names: ['tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner', 'medspacy_pyrush', 'medspacy_target_matcher', 'medspacy_context']. Falling back to regex negation.
2025-05-24 21:29:55,007 - ERROR - Failed to initialize Medspacy: [E966] `nlp.add_pipe` now takes the string name of the registered component factory, not a callable component. Expected string, but got <medspacy.context.context.ConText object at 0x7b591231d410> (name: 'medspacy_context').

- If you created your component with `nlp.create_pipe('name')`: remove nlp.create_pipe and call `nlp.add_pipe('name')` instead.

- If you passed in a component like `TextCategorizer()`: call `nlp.add_pipe` with the string name instead, e.g. `nlp.add_pipe('textcat')`.

- If you're using a custom component: Add the decorator `@Language.component` (for function components) or `@Language.factory` (for class components / factories) to your custom component and assign it a name, e.g. `@Language.component('your_name')`. You can then run `nlp.add_pipe('your_name')` to add it to the pipeline.
2025-05-24 21:29:55,019 - WARNING - Missing symptoms: ['patient presents with facial pain, nasal congestion, and fever for 10 days. reports purulent nasal discharge.']. Initiating knowledge base update.
2025-05-24 21:29:55,020 - ERROR - Error extracting features for note ID 1: extract_aggravating_alleviating() missing 1 required positional argument: 'factor'
2025-05-24 21:29:55,020 - WARNING - Invalid or empty text for embedding:   
2025-05-24 21:29:55,031 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:29:55,855 - ERROR - Failed to initialize Medspacy: [E007] 'medspacy_context' already exists in pipeline. Existing names: ['tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner', 'medspacy_pyrush', 'medspacy_target_matcher', 'medspacy_context']
2025-05-24 21:29:55,855 - ERROR - Failed to get shared NLP pipeline: [E007] 'medspacy_context' already exists in pipeline. Existing names: ['tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner', 'medspacy_pyrush', 'medspacy_target_matcher', 'medspacy_context']. Falling back to regex negation.
2025-05-24 21:29:55,860 - WARNING - Missing symptoms: ['patient presents with facial pain, nasal congestion, and fever for 10 days. reports purulent nasal discharge.']. Initiating knowledge base update.
2025-05-24 21:29:55,861 - WARNING - Extracted symptoms do not match expected symptoms. Adjusting differentials.
2025-05-24 21:29:57,585 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-24 21:29:57,587 - ERROR - Error extracting features for note ID 2: extract_aggravating_alleviating() missing 1 required positional argument: 'factor'
2025-05-24 21:29:57,615 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:29:58,493 - ERROR - Failed to initialize Medspacy: [E007] 'medspacy_context' already exists in pipeline. Existing names: ['tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner', 'medspacy_pyrush', 'medspacy_target_matcher', 'medspacy_context']
2025-05-24 21:29:58,493 - ERROR - Failed to get shared NLP pipeline: [E007] 'medspacy_context' already exists in pipeline. Existing names: ['tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner', 'medspacy_pyrush', 'medspacy_target_matcher', 'medspacy_context']. Falling back to regex negation.
2025-05-24 21:29:59,376 - ERROR - Failed to initialize Medspacy: [E966] `nlp.add_pipe` now takes the string name of the registered component factory, not a callable component. Expected string, but got <medspacy.context.context.ConText object at 0x7b591231de90> (name: 'medspacy_context').

- If you created your component with `nlp.create_pipe('name')`: remove nlp.create_pipe and call `nlp.add_pipe('name')` instead.

- If you passed in a component like `TextCategorizer()`: call `nlp.add_pipe` with the string name instead, e.g. `nlp.add_pipe('textcat')`.

- If you're using a custom component: Add the decorator `@Language.component` (for function components) or `@Language.factory` (for class components / factories) to your custom component and assign it a name, e.g. `@Language.component('your_name')`. You can then run `nlp.add_pipe('your_name')` to add it to the pipeline.
2025-05-24 21:30:01,530 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-24 21:30:01,531 - ERROR - Error extracting features for note ID 2: extract_aggravating_alleviating() missing 1 required positional argument: 'factor'
2025-05-24 21:30:01,560 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:30:02,451 - ERROR - Failed to initialize Medspacy: [E007] 'medspacy_context' already exists in pipeline. Existing names: ['tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner', 'medspacy_pyrush', 'medspacy_target_matcher', 'medspacy_context']
2025-05-24 21:30:02,452 - ERROR - Failed to get shared NLP pipeline: [E007] 'medspacy_context' already exists in pipeline. Existing names: ['tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner', 'medspacy_pyrush', 'medspacy_target_matcher', 'medspacy_context']. Falling back to regex negation.
2025-05-24 21:30:03,338 - ERROR - Failed to initialize Medspacy: [E966] `nlp.add_pipe` now takes the string name of the registered component factory, not a callable component. Expected string, but got <medspacy.context.context.ConText object at 0x7b5912132fd0> (name: 'medspacy_context').

- If you created your component with `nlp.create_pipe('name')`: remove nlp.create_pipe and call `nlp.add_pipe('name')` instead.

- If you passed in a component like `TextCategorizer()`: call `nlp.add_pipe` with the string name instead, e.g. `nlp.add_pipe('textcat')`.

- If you're using a custom component: Add the decorator `@Language.component` (for function components) or `@Language.factory` (for class components / factories) to your custom component and assign it a name, e.g. `@Language.component('your_name')`. You can then run `nlp.add_pipe('your_name')` to add it to the pipeline.
2025-05-24 21:30:04,921 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-24 21:30:04,923 - ERROR - Error extracting features for note ID 2: extract_aggravating_alleviating() missing 1 required positional argument: 'factor'
2025-05-24 21:30:04,946 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:30:06,235 - ERROR - Failed to initialize Medspacy: [E007] 'medspacy_context' already exists in pipeline. Existing names: ['tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner', 'medspacy_pyrush', 'medspacy_target_matcher', 'medspacy_context']
2025-05-24 21:30:06,235 - ERROR - Failed to get shared NLP pipeline: [E007] 'medspacy_context' already exists in pipeline. Existing names: ['tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner', 'medspacy_pyrush', 'medspacy_target_matcher', 'medspacy_context']. Falling back to regex negation.
2025-05-24 21:30:06,237 - WARNING - Extracted symptoms do not match expected symptoms. Adjusting differentials.
2025-05-24 21:30:06,238 - ERROR - Error extracting features for note ID 3: extract_aggravating_alleviating() missing 1 required positional argument: 'factor'
2025-05-24 21:30:06,263 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:30:07,130 - ERROR - Failed to initialize Medspacy: [E007] 'medspacy_context' already exists in pipeline. Existing names: ['tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner', 'medspacy_pyrush', 'medspacy_target_matcher', 'medspacy_context']
2025-05-24 21:30:07,130 - ERROR - Failed to get shared NLP pipeline: [E007] 'medspacy_context' already exists in pipeline. Existing names: ['tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner', 'medspacy_pyrush', 'medspacy_target_matcher', 'medspacy_context']. Falling back to regex negation.
2025-05-24 21:30:08,034 - ERROR - Failed to initialize Medspacy: [E966] `nlp.add_pipe` now takes the string name of the registered component factory, not a callable component. Expected string, but got <medspacy.context.context.ConText object at 0x7b591259ce10> (name: 'medspacy_context').

- If you created your component with `nlp.create_pipe('name')`: remove nlp.create_pipe and call `nlp.add_pipe('name')` instead.

- If you passed in a component like `TextCategorizer()`: call `nlp.add_pipe` with the string name instead, e.g. `nlp.add_pipe('textcat')`.

- If you're using a custom component: Add the decorator `@Language.component` (for function components) or `@Language.factory` (for class components / factories) to your custom component and assign it a name, e.g. `@Language.component('your_name')`. You can then run `nlp.add_pipe('your_name')` to add it to the pipeline.
2025-05-24 21:30:08,036 - ERROR - Error extracting features for note ID 3: extract_aggravating_alleviating() missing 1 required positional argument: 'factor'
2025-05-24 21:30:08,061 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:30:08,941 - ERROR - Failed to initialize Medspacy: [E007] 'medspacy_context' already exists in pipeline. Existing names: ['tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner', 'medspacy_pyrush', 'medspacy_target_matcher', 'medspacy_context']
2025-05-24 21:30:08,942 - ERROR - Failed to get shared NLP pipeline: [E007] 'medspacy_context' already exists in pipeline. Existing names: ['tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner', 'medspacy_pyrush', 'medspacy_target_matcher', 'medspacy_context']. Falling back to regex negation.
2025-05-24 21:30:09,815 - ERROR - Failed to initialize Medspacy: [E966] `nlp.add_pipe` now takes the string name of the registered component factory, not a callable component. Expected string, but got <medspacy.context.context.ConText object at 0x7b58fce22cd0> (name: 'medspacy_context').

- If you created your component with `nlp.create_pipe('name')`: remove nlp.create_pipe and call `nlp.add_pipe('name')` instead.

- If you passed in a component like `TextCategorizer()`: call `nlp.add_pipe` with the string name instead, e.g. `nlp.add_pipe('textcat')`.

- If you're using a custom component: Add the decorator `@Language.component` (for function components) or `@Language.factory` (for class components / factories) to your custom component and assign it a name, e.g. `@Language.component('your_name')`. You can then run `nlp.add_pipe('your_name')` to add it to the pipeline.
2025-05-24 21:30:09,818 - ERROR - Error extracting features for note ID 3: extract_aggravating_alleviating() missing 1 required positional argument: 'factor'
2025-05-24 21:30:09,826 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:30:10,661 - ERROR - Failed to initialize Medspacy: [E007] 'medspacy_context' already exists in pipeline. Existing names: ['tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner', 'medspacy_pyrush', 'medspacy_target_matcher', 'medspacy_context']
2025-05-24 21:30:10,661 - ERROR - Failed to get shared NLP pipeline: [E007] 'medspacy_context' already exists in pipeline. Existing names: ['tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner', 'medspacy_pyrush', 'medspacy_target_matcher', 'medspacy_context']. Falling back to regex negation.
2025-05-24 21:30:10,663 - WARNING - Extracted symptoms do not match expected symptoms. Adjusting differentials.
2025-05-24 21:35:43,500 - WARNING - Empty resource loaded: diagnosis_relevance.json
2025-05-24 21:35:43,510 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:37:12,661 - ERROR - Failed to initialize Medspacy: [E966] `nlp.add_pipe` now takes the string name of the registered component factory, not a callable component. Expected string, but got <medspacy.context.context.ConText object at 0x729d6f06b210> (name: 'medspacy_context').

- If you created your component with `nlp.create_pipe('name')`: remove nlp.create_pipe and call `nlp.add_pipe('name')` instead.

- If you passed in a component like `TextCategorizer()`: call `nlp.add_pipe` with the string name instead, e.g. `nlp.add_pipe('textcat')`.

- If you're using a custom component: Add the decorator `@Language.component` (for function components) or `@Language.factory` (for class components / factories) to your custom component and assign it a name, e.g. `@Language.component('your_name')`. You can then run `nlp.add_pipe('your_name')` to add it to the pipeline.
2025-05-24 21:37:12,684 - ERROR - Error extracting features for note ID 1: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:37:12,706 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:37:13,625 - ERROR - Failed to initialize Medspacy: [E966] `nlp.add_pipe` now takes the string name of the registered component factory, not a callable component. Expected string, but got <medspacy.context.context.ConText object at 0x72a01abe5150> (name: 'medspacy_context').

- If you created your component with `nlp.create_pipe('name')`: remove nlp.create_pipe and call `nlp.add_pipe('name')` instead.

- If you passed in a component like `TextCategorizer()`: call `nlp.add_pipe` with the string name instead, e.g. `nlp.add_pipe('textcat')`.

- If you're using a custom component: Add the decorator `@Language.component` (for function components) or `@Language.factory` (for class components / factories) to your custom component and assign it a name, e.g. `@Language.component('your_name')`. You can then run `nlp.add_pipe('your_name')` to add it to the pipeline.
2025-05-24 21:37:13,640 - ERROR - Error extracting features for note ID 1: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:37:13,663 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:37:14,577 - ERROR - Failed to initialize Medspacy: [E966] `nlp.add_pipe` now takes the string name of the registered component factory, not a callable component. Expected string, but got <medspacy.context.context.ConText object at 0x72a01a910a90> (name: 'medspacy_context').

- If you created your component with `nlp.create_pipe('name')`: remove nlp.create_pipe and call `nlp.add_pipe('name')` instead.

- If you passed in a component like `TextCategorizer()`: call `nlp.add_pipe` with the string name instead, e.g. `nlp.add_pipe('textcat')`.

- If you're using a custom component: Add the decorator `@Language.component` (for function components) or `@Language.factory` (for class components / factories) to your custom component and assign it a name, e.g. `@Language.component('your_name')`. You can then run `nlp.add_pipe('your_name')` to add it to the pipeline.
2025-05-24 21:37:14,595 - ERROR - Error extracting features for note ID 1: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:37:14,596 - WARNING - Invalid or empty text for embedding:   
2025-05-24 21:37:14,603 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:37:14,620 - ERROR - Analysis failed for note 1: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/ai_summary.py", line 141, in generate_ai_analysis
    negated_symptoms = tracker.process_note(note, chief_complaint, expected_symptoms)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/departments/nlp/symptom_tracker.py", line 473, in process_note
    doc = self.nlp(field)
          ^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/language.py", line 1054, in __call__
    error_handler(name, proc, [doc], e)
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/util.py", line 1722, in raise_error
    raise e
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/language.py", line 1049, in __call__
    doc = proc(doc, **component_cfg.get(name, {}))  # type: ignore[call-arg]
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/PyRuSH/PyRuSHSentencizer.py", line 53, in __call__
    cset_annotations([doc], tags)
  File "PyRuSH/StaticSentencizerFun.pyx", line 48, in PyRuSH.StaticSentencizerFun.cset_annotations
  File "PyRuSH/StaticSentencizerFun.pyx", line 56, in PyRuSH.StaticSentencizerFun.cset_annotations
  File "spacy/tokens/token.pyx", line 515, in spacy.tokens.token.Token.sent_start.__set__
  File "spacy/tokens/token.pyx", line 535, in spacy.tokens.token.Token.is_sent_start.__set__
ValueError: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:37:14,622 - ERROR - Error processing note 1: cannot access local variable 'differential_output' where it is not associated with a value
2025-05-24 21:37:14,630 - ERROR - Error extracting features for note ID 2: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:37:14,654 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:37:15,664 - ERROR - Failed to initialize Medspacy: [E966] `nlp.add_pipe` now takes the string name of the registered component factory, not a callable component. Expected string, but got <medspacy.context.context.ConText object at 0x72a01b81b9d0> (name: 'medspacy_context').

- If you created your component with `nlp.create_pipe('name')`: remove nlp.create_pipe and call `nlp.add_pipe('name')` instead.

- If you passed in a component like `TextCategorizer()`: call `nlp.add_pipe` with the string name instead, e.g. `nlp.add_pipe('textcat')`.

- If you're using a custom component: Add the decorator `@Language.component` (for function components) or `@Language.factory` (for class components / factories) to your custom component and assign it a name, e.g. `@Language.component('your_name')`. You can then run `nlp.add_pipe('your_name')` to add it to the pipeline.
2025-05-24 21:37:15,673 - ERROR - Error extracting features for note ID 2: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:37:15,697 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:37:16,624 - ERROR - Failed to initialize Medspacy: [E966] `nlp.add_pipe` now takes the string name of the registered component factory, not a callable component. Expected string, but got <medspacy.context.context.ConText object at 0x729d6d8f9450> (name: 'medspacy_context').

- If you created your component with `nlp.create_pipe('name')`: remove nlp.create_pipe and call `nlp.add_pipe('name')` instead.

- If you passed in a component like `TextCategorizer()`: call `nlp.add_pipe` with the string name instead, e.g. `nlp.add_pipe('textcat')`.

- If you're using a custom component: Add the decorator `@Language.component` (for function components) or `@Language.factory` (for class components / factories) to your custom component and assign it a name, e.g. `@Language.component('your_name')`. You can then run `nlp.add_pipe('your_name')` to add it to the pipeline.
2025-05-24 21:37:16,635 - ERROR - Error extracting features for note ID 2: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:37:16,644 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:37:16,654 - ERROR - Analysis failed for note 2: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/ai_summary.py", line 141, in generate_ai_analysis
    negated_symptoms = tracker.process_note(note, chief_complaint, expected_symptoms)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/departments/nlp/symptom_tracker.py", line 473, in process_note
    doc = self.nlp(field)
          ^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/language.py", line 1054, in __call__
    error_handler(name, proc, [doc], e)
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/util.py", line 1722, in raise_error
    raise e
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/language.py", line 1049, in __call__
    doc = proc(doc, **component_cfg.get(name, {}))  # type: ignore[call-arg]
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/PyRuSH/PyRuSHSentencizer.py", line 53, in __call__
    cset_annotations([doc], tags)
  File "PyRuSH/StaticSentencizerFun.pyx", line 48, in PyRuSH.StaticSentencizerFun.cset_annotations
  File "PyRuSH/StaticSentencizerFun.pyx", line 56, in PyRuSH.StaticSentencizerFun.cset_annotations
  File "spacy/tokens/token.pyx", line 515, in spacy.tokens.token.Token.sent_start.__set__
  File "spacy/tokens/token.pyx", line 535, in spacy.tokens.token.Token.is_sent_start.__set__
ValueError: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:37:16,655 - ERROR - Error processing note 2: cannot access local variable 'differential_output' where it is not associated with a value
2025-05-24 21:37:16,662 - ERROR - Error extracting features for note ID 3: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:37:16,685 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:37:17,764 - ERROR - Failed to initialize Medspacy: [E966] `nlp.add_pipe` now takes the string name of the registered component factory, not a callable component. Expected string, but got <medspacy.context.context.ConText object at 0x729d6ceaaed0> (name: 'medspacy_context').

- If you created your component with `nlp.create_pipe('name')`: remove nlp.create_pipe and call `nlp.add_pipe('name')` instead.

- If you passed in a component like `TextCategorizer()`: call `nlp.add_pipe` with the string name instead, e.g. `nlp.add_pipe('textcat')`.

- If you're using a custom component: Add the decorator `@Language.component` (for function components) or `@Language.factory` (for class components / factories) to your custom component and assign it a name, e.g. `@Language.component('your_name')`. You can then run `nlp.add_pipe('your_name')` to add it to the pipeline.
2025-05-24 21:37:17,772 - ERROR - Error extracting features for note ID 3: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:37:17,795 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:37:18,721 - ERROR - Failed to initialize Medspacy: [E966] `nlp.add_pipe` now takes the string name of the registered component factory, not a callable component. Expected string, but got <medspacy.context.context.ConText object at 0x729d66189610> (name: 'medspacy_context').

- If you created your component with `nlp.create_pipe('name')`: remove nlp.create_pipe and call `nlp.add_pipe('name')` instead.

- If you passed in a component like `TextCategorizer()`: call `nlp.add_pipe` with the string name instead, e.g. `nlp.add_pipe('textcat')`.

- If you're using a custom component: Add the decorator `@Language.component` (for function components) or `@Language.factory` (for class components / factories) to your custom component and assign it a name, e.g. `@Language.component('your_name')`. You can then run `nlp.add_pipe('your_name')` to add it to the pipeline.
2025-05-24 21:37:18,731 - ERROR - Error extracting features for note ID 3: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:37:18,739 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:37:18,751 - ERROR - Analysis failed for note 3: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/ai_summary.py", line 141, in generate_ai_analysis
    negated_symptoms = tracker.process_note(note, chief_complaint, expected_symptoms)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/departments/nlp/symptom_tracker.py", line 473, in process_note
    doc = self.nlp(field)
          ^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/language.py", line 1054, in __call__
    error_handler(name, proc, [doc], e)
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/util.py", line 1722, in raise_error
    raise e
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/language.py", line 1049, in __call__
    doc = proc(doc, **component_cfg.get(name, {}))  # type: ignore[call-arg]
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/PyRuSH/PyRuSHSentencizer.py", line 53, in __call__
    cset_annotations([doc], tags)
  File "PyRuSH/StaticSentencizerFun.pyx", line 48, in PyRuSH.StaticSentencizerFun.cset_annotations
  File "PyRuSH/StaticSentencizerFun.pyx", line 56, in PyRuSH.StaticSentencizerFun.cset_annotations
  File "spacy/tokens/token.pyx", line 515, in spacy.tokens.token.Token.sent_start.__set__
  File "spacy/tokens/token.pyx", line 535, in spacy.tokens.token.Token.is_sent_start.__set__
ValueError: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:37:18,753 - ERROR - Error processing note 3: cannot access local variable 'differential_output' where it is not associated with a value
2025-05-24 21:44:10,610 - WARNING - Empty resource loaded: diagnosis_relevance.json
2025-05-24 21:44:10,625 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:45:36,869 - ERROR - Batch processing failed: 'SymptomTracker' object has no attribute 'collection'
2025-05-24 21:45:53,406 - WARNING - Empty resource loaded: diagnosis_relevance.json
2025-05-24 21:45:53,420 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:47:26,255 - ERROR - Batch processing failed: 'SymptomTracker' object has no attribute 'collection'
2025-05-24 21:54:21,862 - WARNING - Empty resource loaded: diagnosis_relevance.json
2025-05-24 21:54:21,875 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:55:48,932 - ERROR - Error extracting features for note ID 1: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:55:49,180 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:55:49,264 - ERROR - Error extracting features for note ID 1: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:55:49,264 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-24 21:55:49,273 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:55:49,278 - ERROR - Analysis failed for note 1: 'SymptomTracker' object has no attribute 'nlp'
Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/ai_summary.py", line 141, in generate_ai_analysis
    negated_symptoms = tracker.process_note(note, chief_complaint, expected_symptoms)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/departments/nlp/symptom_tracker.py", line 448, in process_note
    if self.nlp:
       ^^^^^^^^
AttributeError: 'SymptomTracker' object has no attribute 'nlp'
2025-05-24 21:55:49,278 - ERROR - Error processing note 1: cannot access local variable 'differential_output' where it is not associated with a value
2025-05-24 21:55:49,299 - ERROR - Error extracting features for note ID 2: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:55:49,323 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:55:49,342 - ERROR - Error extracting features for note ID 2: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:55:49,343 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-24 21:55:49,351 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:55:49,352 - ERROR - Analysis failed for note 2: 'SymptomTracker' object has no attribute 'nlp'
Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/ai_summary.py", line 141, in generate_ai_analysis
    negated_symptoms = tracker.process_note(note, chief_complaint, expected_symptoms)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/departments/nlp/symptom_tracker.py", line 448, in process_note
    if self.nlp:
       ^^^^^^^^
AttributeError: 'SymptomTracker' object has no attribute 'nlp'
2025-05-24 21:55:49,353 - ERROR - Error processing note 2: cannot access local variable 'differential_output' where it is not associated with a value
2025-05-24 21:55:49,381 - ERROR - Error extracting features for note ID 3: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:55:49,403 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:55:49,430 - ERROR - Error extracting features for note ID 3: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:55:49,430 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-24 21:55:49,439 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:55:49,440 - ERROR - Analysis failed for note 3: 'SymptomTracker' object has no attribute 'nlp'
Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/ai_summary.py", line 141, in generate_ai_analysis
    negated_symptoms = tracker.process_note(note, chief_complaint, expected_symptoms)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/departments/nlp/symptom_tracker.py", line 448, in process_note
    if self.nlp:
       ^^^^^^^^
AttributeError: 'SymptomTracker' object has no attribute 'nlp'
2025-05-24 21:55:49,441 - ERROR - Error processing note 3: cannot access local variable 'differential_output' where it is not associated with a value
2025-05-24 21:56:05,561 - WARNING - Empty resource loaded: diagnosis_relevance.json
2025-05-24 21:56:05,577 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:57:41,685 - ERROR - Error extracting features for note ID 1: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:57:41,987 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:57:42,119 - ERROR - Error extracting features for note ID 1: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:57:42,119 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-24 21:57:42,129 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:57:42,136 - ERROR - Analysis failed for note 1: 'SymptomTracker' object has no attribute 'nlp'
Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/ai_summary.py", line 141, in generate_ai_analysis
    negated_symptoms = tracker.process_note(note, chief_complaint, expected_symptoms)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/departments/nlp/symptom_tracker.py", line 448, in process_note
    if self.nlp:
       ^^^^^^^^
AttributeError: 'SymptomTracker' object has no attribute 'nlp'
2025-05-24 21:57:42,137 - ERROR - Error processing note 1: cannot access local variable 'differential_output' where it is not associated with a value
2025-05-24 21:57:42,167 - ERROR - Error extracting features for note ID 2: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:57:42,204 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:57:42,234 - ERROR - Error extracting features for note ID 2: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:57:42,235 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-24 21:57:42,242 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:57:42,244 - ERROR - Analysis failed for note 2: 'SymptomTracker' object has no attribute 'nlp'
Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/ai_summary.py", line 141, in generate_ai_analysis
    negated_symptoms = tracker.process_note(note, chief_complaint, expected_symptoms)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/departments/nlp/symptom_tracker.py", line 448, in process_note
    if self.nlp:
       ^^^^^^^^
AttributeError: 'SymptomTracker' object has no attribute 'nlp'
2025-05-24 21:57:42,245 - ERROR - Error processing note 2: cannot access local variable 'differential_output' where it is not associated with a value
2025-05-24 21:57:42,269 - ERROR - Error extracting features for note ID 3: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:57:42,292 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:57:42,319 - ERROR - Error extracting features for note ID 3: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 21:57:42,319 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-24 21:57:42,327 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 21:57:42,328 - ERROR - Analysis failed for note 3: 'SymptomTracker' object has no attribute 'nlp'
Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/ai_summary.py", line 141, in generate_ai_analysis
    negated_symptoms = tracker.process_note(note, chief_complaint, expected_symptoms)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/departments/nlp/symptom_tracker.py", line 448, in process_note
    if self.nlp:
       ^^^^^^^^
AttributeError: 'SymptomTracker' object has no attribute 'nlp'
2025-05-24 21:57:42,329 - ERROR - Error processing note 3: cannot access local variable 'differential_output' where it is not associated with a value
2025-05-24 22:05:12,669 - WARNING - Empty resource loaded: diagnosis_relevance.json
2025-05-24 22:05:12,684 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 22:06:38,815 - ERROR - Error extracting features for note ID 1: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:38,847 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 22:06:38,931 - ERROR - Error extracting features for note ID 1: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:38,932 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-24 22:06:38,942 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 22:06:38,968 - ERROR - Error processing field with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:39,018 - ERROR - Error processing field with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:39,049 - ERROR - Error processing field with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:39,058 - ERROR - Error processing field with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:39,065 - ERROR - Error processing field with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:39,066 - WARNING - Missing symptoms: ['patient presents with facial pain, nasal congestion, and fever for 10 days. reports purulent nasal discharge.']. Initiating knowledge base update.
2025-05-24 22:06:39,067 - WARNING - Extracted symptoms do not match expected symptoms. Adjusting differentials.
2025-05-24 22:06:39,086 - ERROR - Error extracting features for note ID 2: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:39,116 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 22:06:39,146 - ERROR - Error extracting features for note ID 2: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:39,147 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-24 22:06:39,154 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 22:06:39,169 - ERROR - Error processing field with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:39,177 - ERROR - Error processing field with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:39,183 - ERROR - Error processing field with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:39,190 - ERROR - Error processing field with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:39,198 - ERROR - Error processing field with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:39,198 - WARNING - Extracted symptoms do not match expected symptoms. Adjusting differentials.
2025-05-24 22:06:39,224 - ERROR - Error extracting features for note ID 3: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:39,248 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 22:06:39,279 - ERROR - Error extracting features for note ID 3: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:39,280 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-24 22:06:39,286 - ERROR - Error loading symptoms from MongoDB: An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, full error: {'ok': 0.0, 'errmsg': 'An existing index has the same name as the requested index. When index names are not specified, they are auto generated and can cause conflicts. Please refer to our documentation. Requested index: { v: 2, unique: true, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }, existing index: { v: 2, key: { category: 1, symptom: 1 }, name: "category_1_symptom_1" }', 'code': 86, 'codeName': 'IndexKeySpecsConflict'}. Falling back to JSON.
2025-05-24 22:06:39,301 - ERROR - Error processing field with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:39,314 - ERROR - Error processing field with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:39,319 - ERROR - Error processing field with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:39,329 - ERROR - Error processing field with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:39,335 - ERROR - Error processing field with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-24 22:06:39,336 - WARNING - Extracted symptoms do not match expected symptoms. Adjusting differentials.
