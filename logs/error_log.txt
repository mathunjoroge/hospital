2025-05-25 07:28:31,979 - WARNING - Empty resource loaded: diagnosis_relevance.json
2025-05-25 07:30:43,290 - ERROR - Error processing situation with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-25 07:30:43,332 - ERROR - Error processing hpi with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-25 07:30:43,354 - ERROR - Error processing assessment with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-25 07:30:43,387 - WARNING - Missing symptoms: ['patient complains of headache']. Initiating knowledge base update.
2025-05-25 07:30:43,470 - ERROR - Error extracting features for note ID 1: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-25 07:30:43,471 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 07:30:43,471 - WARNING - No patient_id for differential diagnosis
2025-05-25 07:30:43,473 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 07:30:43,481 - WARNING - Extracted symptoms do not match expected symptoms. Using knowledge base fallback.
2025-05-25 08:00:56,400 - WARNING - Empty resource loaded: diagnosis_relevance.json
2025-05-25 08:02:56,614 - ERROR - Error processing situation with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-25 08:02:56,655 - ERROR - Error processing hpi with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-25 08:02:56,675 - ERROR - Error processing assessment with NLP: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-25 08:02:56,710 - WARNING - Missing symptoms: ['patient complains of headache']. Initiating knowledge base update.
2025-05-25 08:02:56,792 - ERROR - Error extracting features for note ID 1: [E043] Refusing to write to token.sent_start if its document is parsed, because this may cause inconsistent state.
2025-05-25 08:02:56,792 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 08:02:56,793 - WARNING - No patient_id for differential diagnosis
2025-05-25 08:02:56,793 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 08:02:56,804 - WARNING - Extracted symptoms do not match expected symptoms. Using knowledge base fallback.
2025-05-25 08:18:02,431 - WARNING - Empty resource loaded: diagnosis_relevance.json
2025-05-25 08:20:00,479 - ERROR - Error processing text with NLP: [E109] Component 'parser' could not be run. Did you forget to call `initialize()`?
2025-05-25 08:20:00,491 - ERROR - Error processing text for negation with NLP: [E109] Component 'parser' could not be run. Did you forget to call `initialize()`?. Falling back to regex.
2025-05-25 08:20:00,588 - ERROR - NLP processing error for note ID 1: [E109] Component 'parser' could not be run. Did you forget to call `initialize()`?
2025-05-25 08:20:00,685 - ERROR - Error processing text with NLP: [E109] Component 'parser' could not be run. Did you forget to call `initialize()`?
2025-05-25 08:20:00,693 - ERROR - Error processing text for negation with NLP: [E109] Component 'parser' could not be run. Did you forget to call `initialize()`?. Falling back to regex.
2025-05-25 08:20:00,694 - ERROR - Error extracting features for note ID 1: extract_aggravating_alleviating() missing 1 required positional argument: 'factor'
2025-05-25 08:20:00,695 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 08:20:00,695 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 08:21:53,688 - WARNING - Empty resource loaded: diagnosis_relevance.json
2025-05-25 08:23:51,895 - ERROR - Error processing text with NLP: [E109] Component 'parser' could not be run. Did you forget to call `initialize()`?
2025-05-25 08:23:51,907 - ERROR - Error processing text for negation with NLP: [E109] Component 'parser' could not be run. Did you forget to call `initialize()`?. Falling back to regex.
2025-05-25 08:23:51,978 - ERROR - NLP processing error for note ID 1: [E109] Component 'parser' could not be run. Did you forget to call `initialize()`?
2025-05-25 08:23:52,068 - ERROR - Error processing text with NLP: [E109] Component 'parser' could not be run. Did you forget to call `initialize()`?
2025-05-25 08:23:52,082 - ERROR - Error processing text for negation with NLP: [E109] Component 'parser' could not be run. Did you forget to call `initialize()`?. Falling back to regex.
2025-05-25 08:23:52,083 - ERROR - Error extracting features for note ID 1: extract_aggravating_alleviating() missing 1 required positional argument: 'factor'
2025-05-25 08:23:52,084 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 08:23:52,085 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 08:24:44,434 - WARNING - Empty resource loaded: diagnosis_relevance.json
2025-05-25 08:26:45,583 - ERROR - Error processing text with NLP: [E109] Component 'parser' could not be run. Did you forget to call `initialize()`?
2025-05-25 08:26:45,594 - ERROR - Error processing text for negation with NLP: [E109] Component 'parser' could not be run. Did you forget to call `initialize()`?. Falling back to regex.
2025-05-25 08:26:45,673 - ERROR - NLP processing error for note ID 1: [E109] Component 'parser' could not be run. Did you forget to call `initialize()`?
2025-05-25 08:26:45,744 - ERROR - Error processing text with NLP: [E109] Component 'parser' could not be run. Did you forget to call `initialize()`?
2025-05-25 08:26:45,752 - ERROR - Error processing text for negation with NLP: [E109] Component 'parser' could not be run. Did you forget to call `initialize()`?. Falling back to regex.
2025-05-25 08:26:45,753 - ERROR - Error extracting features for note ID 1: extract_aggravating_alleviating() missing 1 required positional argument: 'factor'
2025-05-25 08:26:45,754 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 08:26:45,754 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 08:39:09,726 - WARNING - Empty resource loaded: diagnosis_relevance.json
2025-05-25 08:39:11,550 - ERROR - Failed to initialize NLP pipeline: ConText.__init__() got an unexpected keyword argument 'rules_path'
2025-05-25 08:39:12,994 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 08:39:14,187 - ERROR - Failed to initialize NLP pipeline: ConText.__init__() got an unexpected keyword argument 'rules_path'
2025-05-25 08:39:15,372 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 08:39:15,373 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 08:39:16,653 - ERROR - Failed to initialize NLP pipeline: ConText.__init__() got an unexpected keyword argument 'rules_path'
2025-05-25 08:39:17,817 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 08:39:17,887 - ERROR - Error extracting features for note ID 1: extract_aggravating_alleviating() missing 1 required positional argument: 'factor'
2025-05-25 08:39:17,888 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 08:39:17,888 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 08:42:26,046 - WARNING - Empty resource loaded: diagnosis_relevance.json
2025-05-25 08:44:24,963 - ERROR - Error processing text with NLP: [E109] Component 'parser' could not be run. Did you forget to call `initialize()`?
2025-05-25 08:44:24,974 - ERROR - Error processing text for negation with NLP: [E109] Component 'parser' could not be run. Did you forget to call `initialize()`?. Falling back to regex.
2025-05-25 08:44:25,063 - ERROR - NLP processing error for note ID 1: [E109] Component 'parser' could not be run. Did you forget to call `initialize()`?
2025-05-25 08:44:25,132 - ERROR - Error processing text with NLP: [E109] Component 'parser' could not be run. Did you forget to call `initialize()`?
2025-05-25 08:44:25,140 - ERROR - Error processing text for negation with NLP: [E109] Component 'parser' could not be run. Did you forget to call `initialize()`?. Falling back to regex.
2025-05-25 08:44:25,142 - ERROR - Error extracting features for note ID 1: extract_aggravating_alleviating() missing 1 required positional argument: 'factor'
2025-05-25 08:44:25,142 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 08:44:25,143 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 11:20:42,690 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 11:20:42,690 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 11:20:42,691 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 11:20:42,691 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 11:20:42,692 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 11:20:42,692 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 11:20:42,692 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 11:20:42,693 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 11:20:42,693 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 11:20:42,694 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 11:20:45,109 - WARNING - No valid symptom rules found in MongoDB. Target matcher will rely on spaCy entities.
2025-05-25 11:20:45,111 - ERROR - Failed to initialize NLP pipeline: ConText.__init__() got an unexpected keyword argument 'rules_path'
2025-05-25 11:20:46,315 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 11:20:46,316 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 11:20:46,403 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 11:20:46,438 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 11:20:57,880 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 11:20:58,291 - ERROR - UMLS synonym generation failed for 'patient complains of headache the headache started three days ago. the headache is associated with fevers and chills': 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/search/current?string=patient+complains+of+headache+the+headache+started+three+days+ago.+the+headache+is+associated+with+fevers+and+chills&ticket=&searchType=exact&sabs=SNOMEDCT_US
2025-05-25 11:20:59,735 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 11:21:00,135 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 11:21:00,645 - ERROR - Error saving knowledge base to JSON: Object of type ObjectId is not JSON serializable
2025-05-25 11:21:00,649 - ERROR - Error extracting features for note ID 1: extract_location() takes 1 positional argument but 2 were given
2025-05-25 11:21:00,651 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 11:21:00,652 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 11:21:00,656 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 11:21:00,671 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 11:21:00,672 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 11:21:00,673 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 11:21:00,674 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 11:21:00,674 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 11:21:00,675 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 11:21:00,676 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 11:21:00,676 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 11:21:00,677 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 11:21:00,679 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 11:21:00,905 - WARNING - Extracted symptoms do not match expected symptoms: ['headache', 'photophobia']. Using knowledge base fallback.
2025-05-25 11:32:07,772 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 11:32:07,772 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 11:32:07,773 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 11:32:07,773 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 11:32:07,774 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 11:32:07,774 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 11:32:07,774 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 11:32:07,775 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 11:32:07,775 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 11:32:07,776 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 11:32:09,933 - ERROR - Failed to initialize NLP pipeline: 'NoneType' object has no attribute 'startswith'
2025-05-25 11:32:11,235 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 11:32:12,605 - ERROR - Failed to initialize NLP pipeline: 'NoneType' object has no attribute 'startswith'
2025-05-25 11:32:13,885 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 11:32:13,886 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 11:32:15,507 - ERROR - Failed to initialize NLP pipeline: 'NoneType' object has no attribute 'startswith'
2025-05-25 11:32:17,201 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 11:32:17,237 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 11:32:17,260 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 11:32:28,605 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 11:32:29,181 - ERROR - UMLS synonym generation failed for 'nausea and vomiting and loss of appetite the patient has jaundice in the eyes taking foods with fats makes the nausea worse taking strong tea and licking salt alleviates the nausea': 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/search/current?string=nausea+and+vomiting+and+loss+of+appetite+the+patient+has+jaundice+in+the+eyes+taking+foods+with+fats+makes+the+nausea+worse+taking+strong+tea+and+licking+salt+alleviates+the+nausea&ticket=&searchType=exact&sabs=SNOMEDCT_US
2025-05-25 11:32:30,759 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 11:32:31,163 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 11:32:31,680 - ERROR - Error saving knowledge base to JSON: Object of type ObjectId is not JSON serializable
2025-05-25 11:32:31,684 - ERROR - Error extracting features for note ID 1: extract_location() takes 1 positional argument but 2 were given
2025-05-25 11:32:31,686 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 11:32:31,686 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 11:32:31,692 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 11:32:31,704 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 11:32:31,705 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 11:32:31,706 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 11:32:31,706 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 11:32:31,707 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 11:32:31,707 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 11:32:31,708 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 11:32:31,708 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 11:32:31,709 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 11:32:31,710 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 11:32:31,835 - WARNING - Extracted symptoms do not match expected symptoms: ['headache', 'photophobia']. Using knowledge base fallback.
2025-05-25 11:49:21,251 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 11:49:21,252 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 11:49:21,252 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 11:49:21,252 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 11:49:21,253 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 11:49:21,253 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 11:49:21,254 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 11:49:21,254 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 11:49:21,254 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 11:49:21,255 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 11:49:23,362 - ERROR - Failed to initialize NLP pipeline: 'NoneType' object has no attribute 'startswith'
2025-05-25 11:49:24,580 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 11:49:25,835 - ERROR - Failed to initialize NLP pipeline: 'NoneType' object has no attribute 'startswith'
2025-05-25 11:49:27,047 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 11:49:27,048 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 11:49:28,460 - ERROR - Failed to initialize NLP pipeline: 'NoneType' object has no attribute 'startswith'
2025-05-25 11:49:29,798 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 11:49:29,838 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 11:49:29,876 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 11:49:29,877 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-25 11:49:29,877 - ERROR - Error extracting features for note ID 1: dictionary update sequence element #0 has length 1; 2 is required
2025-05-25 11:49:29,878 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 11:49:29,879 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 11:49:29,881 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 11:49:29,892 - WARNING - Extracted symptoms do not match expected symptoms: ['headache', 'photophobia']. Using knowledge base fallback.
2025-05-25 12:05:46,191 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 12:05:46,192 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 12:05:46,192 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 12:05:46,193 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 12:05:46,193 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 12:05:46,194 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 12:05:46,194 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 12:05:46,194 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 12:05:46,195 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 12:05:46,196 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 12:05:48,433 - ERROR - Failed to initialize NLP pipeline: 

Config validation error
medspacy_context -> rules_path	extra fields not permitted
{'nlp': <spacy.lang.en.English object at 0x7a2cb47cb290>, 'name': 'medspacy_context', 'rules_path': None, '@factories': 'medspacy_context'}
2025-05-25 12:05:49,609 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 12:05:50,806 - ERROR - Failed to initialize NLP pipeline: 

Config validation error
medspacy_context -> rules_path	extra fields not permitted
{'nlp': <spacy.lang.en.English object at 0x7a2cd55baa90>, 'name': 'medspacy_context', 'rules_path': None, '@factories': 'medspacy_context'}
2025-05-25 12:05:51,968 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 12:05:51,968 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 12:05:53,335 - ERROR - Failed to initialize NLP pipeline: 

Config validation error
medspacy_context -> rules_path	extra fields not permitted
{'nlp': <spacy.lang.en.English object at 0x7a2cb728da50>, 'name': 'medspacy_context', 'rules_path': None, '@factories': 'medspacy_context'}
2025-05-25 12:05:54,498 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 12:05:54,534 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 12:05:54,567 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 12:05:54,568 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-25 12:05:54,569 - ERROR - Error extracting features for note ID 1: dictionary update sequence element #0 has length 1; 2 is required
2025-05-25 12:05:54,570 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 12:05:54,570 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 12:05:54,574 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 12:05:54,582 - WARNING - Extracted symptoms do not match expected symptoms: ['headache', 'photophobia']. Using knowledge base fallback.
2025-05-25 12:07:16,430 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 12:07:16,430 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 12:07:16,431 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 12:07:16,431 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 12:07:16,432 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 12:07:16,432 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 12:07:16,432 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 12:07:16,433 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 12:07:16,433 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 12:07:16,434 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 12:07:18,611 - ERROR - Failed to initialize NLP pipeline: 

Config validation error
medspacy_context -> rules_path	extra fields not permitted
{'nlp': <spacy.lang.en.English object at 0x75154861e650>, 'name': 'medspacy_context', 'rules_path': None, '@factories': 'medspacy_context'}
2025-05-25 12:07:19,856 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 12:07:21,094 - ERROR - Failed to initialize NLP pipeline: 

Config validation error
medspacy_context -> rules_path	extra fields not permitted
{'nlp': <spacy.lang.en.English object at 0x75156feb2a90>, 'name': 'medspacy_context', 'rules_path': None, '@factories': 'medspacy_context'}
2025-05-25 12:07:22,302 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 12:07:22,302 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 12:07:23,674 - ERROR - Failed to initialize NLP pipeline: 

Config validation error
medspacy_context -> rules_path	extra fields not permitted
{'nlp': <spacy.lang.en.English object at 0x7515247e3d10>, 'name': 'medspacy_context', 'rules_path': None, '@factories': 'medspacy_context'}
2025-05-25 12:07:24,994 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 12:07:25,037 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 12:07:25,067 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 12:07:25,067 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-25 12:07:25,068 - ERROR - Error extracting features for note ID 1: dictionary update sequence element #0 has length 1; 2 is required
2025-05-25 12:07:25,068 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 12:07:25,069 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 12:07:25,072 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 12:07:25,083 - WARNING - Extracted symptoms do not match expected symptoms: ['headache', 'photophobia']. Using knowledge base fallback.
2025-05-25 12:11:26,642 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 12:11:26,642 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 12:11:26,643 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 12:11:26,643 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 12:11:26,644 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 12:11:26,644 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 12:11:26,644 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 12:11:26,645 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 12:11:26,645 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 12:11:26,646 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 12:13:21,612 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 12:13:23,065 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 12:15:36,410 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 12:15:37,874 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 12:15:37,874 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 12:17:48,841 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 12:17:50,184 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 12:17:50,234 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 12:17:50,278 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 12:17:50,279 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-25 12:17:50,279 - ERROR - Error extracting features for note ID 1: dictionary update sequence element #0 has length 1; 2 is required
2025-05-25 12:17:50,280 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 12:17:50,280 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 12:17:50,282 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 12:17:50,292 - WARNING - Extracted symptoms do not match expected symptoms: ['headache', 'photophobia']. Using knowledge base fallback.
2025-05-25 12:22:29,739 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 12:22:29,739 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 12:22:29,740 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 12:22:29,740 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 12:22:29,741 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 12:22:29,741 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 12:22:29,742 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 12:22:29,742 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 12:22:29,743 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 12:22:29,744 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 12:24:34,476 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 12:24:36,446 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 12:26:52,028 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 12:26:53,405 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 12:26:53,406 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 12:28:58,960 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 12:29:00,555 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 12:29:00,591 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 12:29:00,636 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 12:29:00,637 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-25 12:29:00,637 - ERROR - Error extracting features for note ID 1: dictionary update sequence element #0 has length 1; 2 is required
2025-05-25 12:29:00,638 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 12:29:00,639 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 12:29:00,641 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 12:29:00,651 - WARNING - Extracted symptoms do not match expected symptoms: ['headache', 'photophobia']. Using knowledge base fallback.
2025-05-25 12:31:15,283 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 12:31:15,284 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 12:31:15,284 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 12:31:15,285 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 12:31:15,285 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 12:31:15,286 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 12:31:15,286 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 12:31:15,287 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 12:31:15,287 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 12:31:15,288 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 12:33:15,012 - ERROR - Error processing text with NLP: [E047] Can't assign a value to unregistered extension attribute 'cui'. Did you forget to call the `set_extension` method?
2025-05-25 12:33:15,018 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 12:33:15,102 - ERROR - NLP processing error for note ID 1: [E047] Can't assign a value to unregistered extension attribute 'cui'. Did you forget to call the `set_extension` method?
2025-05-25 12:33:15,168 - ERROR - Error processing text with NLP: [E047] Can't assign a value to unregistered extension attribute 'cui'. Did you forget to call the `set_extension` method?
2025-05-25 12:33:15,171 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 12:33:15,172 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-25 12:33:15,173 - ERROR - Error extracting features for note ID 1: dictionary update sequence element #0 has length 1; 2 is required
2025-05-25 12:33:15,174 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 12:33:15,174 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 12:33:15,178 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 12:33:15,193 - WARNING - Extracted symptoms do not match expected symptoms: ['headache', 'photophobia']. Using knowledge base fallback.
2025-05-25 12:38:54,033 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 12:38:54,033 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 12:38:54,034 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 12:38:54,034 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 12:38:54,035 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 12:38:54,035 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 12:38:54,036 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 12:38:54,036 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 12:38:54,036 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 12:38:54,037 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 12:40:48,765 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 12:40:50,382 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 12:43:08,426 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 12:43:09,744 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 12:43:09,745 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 13:51:06,741 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 13:51:06,742 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 13:51:06,742 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 13:51:06,743 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 13:51:06,743 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 13:51:06,744 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 13:51:06,744 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 13:51:06,745 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 13:51:06,745 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 13:51:06,746 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 13:51:07,137 - ERROR - Failed to initialize NLP pipeline: [E050] Can't find model 'en_core_sci_sm'. It doesn't seem to be a Python package or a valid path to a data directory.
2025-05-25 13:51:07,139 - ERROR - Failed to initialize NLP pipeline: [E050] Can't find model 'en_core_sci_sm'. It doesn't seem to be a Python package or a valid path to a data directory.. Falling back to regex negation.
2025-05-25 13:51:07,140 - ERROR - Failed to initialize NLP pipeline: [E050] Can't find model 'en_core_sci_sm'. It doesn't seem to be a Python package or a valid path to a data directory.
2025-05-25 13:51:07,141 - ERROR - Analysis failed for note 1: [E050] Can't find model 'en_core_sci_sm'. It doesn't seem to be a Python package or a valid path to a data directory.
Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/nlp_pipeline.py", line 23, in get_nlp
    nlp = spacy.load("en_core_sci_sm", disable=["lemmatizer", "parser", "ner"])
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/__init__.py", line 51, in load
    return util.load_model(
           ^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/util.py", line 472, in load_model
    raise IOError(Errors.E050.format(name=name))
OSError: [E050] Can't find model 'en_core_sci_sm'. It doesn't seem to be a Python package or a valid path to a data directory.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/ai_summary.py", line 111, in generate_ai_analysis
    analyzer = ClinicalAnalyzer()
               ^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/departments/nlp/clinical_analyzer.py", line 136, in __init__
    self.nlp = get_nlp()
               ^^^^^^^^^
  File "/home/mathu/projects/hospital/departments/nlp/nlp_pipeline.py", line 118, in get_nlp
    nlp = spacy.load("en_core_sci_sm", disable=["lemmatizer", "parser", "ner"])
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/__init__.py", line 51, in load
    return util.load_model(
           ^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/util.py", line 472, in load_model
    raise IOError(Errors.E050.format(name=name))
OSError: [E050] Can't find model 'en_core_sci_sm'. It doesn't seem to be a Python package or a valid path to a data directory.
2025-05-25 14:06:40,053 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 14:06:40,054 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 14:06:40,054 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 14:06:40,055 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 14:06:40,055 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 14:06:40,055 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 14:06:40,056 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 14:06:40,056 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 14:06:40,057 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 14:06:40,058 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 14:06:40,476 - ERROR - Failed to initialize NLP pipeline: [E050] Can't find model 'en_core_sci_sm'. It doesn't seem to be a Python package or a valid path to a data directory.
2025-05-25 14:06:40,479 - ERROR - Failed to initialize NLP pipeline: [E050] Can't find model 'en_core_sci_sm'. It doesn't seem to be a Python package or a valid path to a data directory.. Falling back to regex negation.
2025-05-25 14:06:40,481 - ERROR - Failed to initialize NLP pipeline: [E050] Can't find model 'en_core_sci_sm'. It doesn't seem to be a Python package or a valid path to a data directory.
2025-05-25 14:06:40,484 - ERROR - Analysis failed for note 1: [E050] Can't find model 'en_core_sci_sm'. It doesn't seem to be a Python package or a valid path to a data directory.
Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/nlp_pipeline.py", line 23, in get_nlp
    nlp = spacy.load("en_core_sci_sm", disable=["lemmatizer", "parser", "ner"])
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/__init__.py", line 51, in load
    return util.load_model(
           ^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/util.py", line 472, in load_model
    raise IOError(Errors.E050.format(name=name))
OSError: [E050] Can't find model 'en_core_sci_sm'. It doesn't seem to be a Python package or a valid path to a data directory.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/ai_summary.py", line 111, in generate_ai_analysis
    analyzer = ClinicalAnalyzer()
               ^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/departments/nlp/clinical_analyzer.py", line 136, in __init__
    self.nlp = get_nlp()
               ^^^^^^^^^
  File "/home/mathu/projects/hospital/departments/nlp/nlp_pipeline.py", line 118, in get_nlp
    nlp = spacy.load("en_core_sci_sm", disable=["lemmatizer", "parser", "ner"])
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/__init__.py", line 51, in load
    return util.load_model(
           ^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/util.py", line 472, in load_model
    raise IOError(Errors.E050.format(name=name))
OSError: [E050] Can't find model 'en_core_sci_sm'. It doesn't seem to be a Python package or a valid path to a data directory.
2025-05-25 14:26:05,761 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 14:26:05,761 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 14:26:05,762 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 14:26:05,762 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 14:26:05,763 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 14:26:05,763 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 14:26:05,764 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 14:26:05,764 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 14:26:05,764 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 14:26:05,765 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 14:26:06,146 - ERROR - Failed to initialize NLP pipeline: [E050] Can't find model 'en_core_sci_sm'. It doesn't seem to be a Python package or a valid path to a data directory.
2025-05-25 14:26:06,149 - ERROR - Failed to initialize NLP pipeline: [E050] Can't find model 'en_core_sci_sm'. It doesn't seem to be a Python package or a valid path to a data directory.. Falling back to regex negation.
2025-05-25 14:26:06,151 - ERROR - Failed to initialize NLP pipeline: [E050] Can't find model 'en_core_sci_sm'. It doesn't seem to be a Python package or a valid path to a data directory.
2025-05-25 14:26:06,152 - ERROR - Analysis failed for note 1: [E050] Can't find model 'en_core_sci_sm'. It doesn't seem to be a Python package or a valid path to a data directory.
Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/nlp_pipeline.py", line 23, in get_nlp
    nlp = spacy.load("en_core_sci_sm", disable=["lemmatizer", "parser", "ner"])
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/__init__.py", line 51, in load
    return util.load_model(
           ^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/util.py", line 472, in load_model
    raise IOError(Errors.E050.format(name=name))
OSError: [E050] Can't find model 'en_core_sci_sm'. It doesn't seem to be a Python package or a valid path to a data directory.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/ai_summary.py", line 111, in generate_ai_analysis
    analyzer = ClinicalAnalyzer()
               ^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/departments/nlp/clinical_analyzer.py", line 136, in __init__
    self.nlp = get_nlp()
               ^^^^^^^^^
  File "/home/mathu/projects/hospital/departments/nlp/nlp_pipeline.py", line 118, in get_nlp
    nlp = spacy.load("en_core_sci_sm", disable=["lemmatizer", "parser", "ner"])
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/__init__.py", line 51, in load
    return util.load_model(
           ^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/util.py", line 472, in load_model
    raise IOError(Errors.E050.format(name=name))
OSError: [E050] Can't find model 'en_core_sci_sm'. It doesn't seem to be a Python package or a valid path to a data directory.
2025-05-25 14:28:51,746 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 14:28:51,747 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 14:28:51,747 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 14:28:51,748 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 14:28:51,748 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 14:28:51,749 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 14:28:51,749 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 14:28:51,750 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 14:28:51,750 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 14:28:51,751 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 14:30:40,680 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 14:30:42,249 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 14:32:41,925 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 14:32:43,034 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 14:32:43,035 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 14:34:59,799 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 14:35:02,195 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 14:35:02,236 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 14:35:02,273 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 14:35:02,274 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-25 14:35:02,274 - ERROR - Error extracting features for note ID 1: dictionary update sequence element #0 has length 1; 2 is required
2025-05-25 14:35:02,275 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 14:35:02,276 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 14:35:02,278 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 14:35:02,287 - WARNING - Extracted symptoms do not match expected symptoms: ['headache', 'photophobia']. Using knowledge base fallback.
2025-05-25 14:39:03,964 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 14:39:03,964 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 14:39:03,965 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 14:39:03,965 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 14:39:03,966 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 14:39:03,966 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 14:39:03,966 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 14:39:03,967 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 14:39:03,967 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 14:39:03,968 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 14:41:00,074 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/nlp_pipeline.py", line 107, in get_nlp
    nlp.initialize()
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/language.py", line 1322, in initialize
    I = registry.resolve(config["initialize"], schema=ConfigSchemaInit)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/confection/__init__.py", line 760, in resolve
    resolved, _ = cls._make(
                  ^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/confection/__init__.py", line 809, in _make
    filled, _, resolved = cls._fill(
                          ^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/confection/__init__.py", line 863, in _fill
    promise_schema = cls.make_promise_schema(value, resolve=resolve)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/confection/__init__.py", line 1069, in make_promise_schema
    func = cls.get(reg_name, func_name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/util.py", line 163, in get
    raise RegistryError(
catalogue.RegistryError: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 14:41:01,520 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 14:43:39,278 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 14:43:39,279 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 14:43:39,280 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 14:43:39,280 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 14:43:39,281 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 14:43:39,281 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 14:43:39,282 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 14:43:39,282 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 14:43:39,283 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 14:43:39,284 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 14:45:35,752 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 14:45:37,437 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 15:05:45,207 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 15:05:45,207 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 15:05:45,208 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 15:05:45,208 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 15:05:45,209 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 15:05:45,209 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 15:05:45,211 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 15:05:45,211 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 15:05:45,212 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 15:05:45,213 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 15:05:47,515 - ERROR - Failed to add medspacy_pyrush: No module named 'medspacy.pyrush'
Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/nlp_pipeline.py", line 31, in get_nlp
    from medspacy.pyrush import PyRuSH
ModuleNotFoundError: No module named 'medspacy.pyrush'
2025-05-25 15:05:47,517 - WARNING - Using sentencizer only.
2025-05-25 15:08:17,679 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/nlp_pipeline.py", line 112, in get_nlp
    nlp.initialize()
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/language.py", line 1322, in initialize
    self._optimizer = sgd
        ^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/confection/__init__.py", line 760, in resolve
    resolved, _ = cls._make(
                  ^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/confection/__init__.py", line 809, in _make
    filled, _, resolved = cls._fill(
                          ^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/confection/__init__.py", line 863, in _fill
    promise_schema = cls.make_promise_schema(value, resolve=resolve)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/confection/__init__.py", line 1069, in make_promise_schema
    func = cls.get(reg_name, func_name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/util.py", line 163, in get
    raise RegistryError(Errors.E892.format(name=registry_name, available=names))
catalogue.RegistryError: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 15:08:19,260 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 15:08:21,270 - ERROR - Failed to add medspacy_pyrush: No module named 'medspacy.pyrush'
Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/nlp_pipeline.py", line 31, in get_nlp
    from medspacy.pyrush import PyRuSH
ModuleNotFoundError: No module named 'medspacy.pyrush'
2025-05-25 15:08:21,271 - WARNING - Using sentencizer only.
2025-05-25 15:10:20,743 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/nlp_pipeline.py", line 112, in get_nlp
    nlp.initialize()
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/language.py", line 1322, in initialize
    self._optimizer = sgd
        ^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/confection/__init__.py", line 760, in resolve
    resolved, _ = cls._make(
                  ^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/confection/__init__.py", line 809, in _make
    filled, _, resolved = cls._fill(
                          ^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/confection/__init__.py", line 863, in _fill
    promise_schema = cls.make_promise_schema(value, resolve=resolve)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/confection/__init__.py", line 1069, in make_promise_schema
    func = cls.get(reg_name, func_name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mathu/projects/hospital/venv/lib/python3.11/site-packages/spacy/util.py", line 163, in get
    raise RegistryError(Errors.E892.format(name=registry_name, available=names))
catalogue.RegistryError: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 15:10:22,275 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 15:10:22,275 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 15:10:23,665 - ERROR - Failed to add medspacy_pyrush: No module named 'medspacy.pyrush'
Traceback (most recent call last):
  File "/home/mathu/projects/hospital/departments/nlp/nlp_pipeline.py", line 31, in get_nlp
    from medspacy.pyrush import PyRuSH
ModuleNotFoundError: No module named 'medspacy.pyrush'
2025-05-25 15:10:23,666 - WARNING - Using sentencizer only.
2025-05-25 15:22:20,457 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 15:22:20,458 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 15:22:20,459 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 15:22:20,460 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 15:22:20,461 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 15:22:20,461 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 15:22:20,462 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 15:22:20,463 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 15:22:20,463 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 15:22:20,465 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 15:24:17,131 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 15:24:18,391 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 15:26:29,763 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 15:26:31,193 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 15:26:31,194 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 15:28:37,045 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 15:28:38,263 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 15:28:38,295 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 15:28:38,329 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 15:28:38,330 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-25 15:28:38,330 - ERROR - Error extracting features for note ID 1: dictionary update sequence element #0 has length 1; 2 is required
2025-05-25 15:28:38,331 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 15:28:38,331 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 15:28:38,334 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 15:28:38,347 - WARNING - Extracted symptoms do not match expected symptoms: ['headache', 'photophobia']. Using knowledge base fallback.
2025-05-25 16:04:18,376 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 16:04:18,377 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 16:04:18,379 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 16:04:18,380 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 16:04:18,381 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 16:04:18,381 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 16:04:18,382 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 16:04:18,383 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 16:04:18,383 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 16:04:18,384 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 16:06:08,924 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 16:06:10,294 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 16:08:31,272 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 16:08:32,974 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 16:08:32,975 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 16:10:46,592 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 16:10:48,062 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 16:10:48,113 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 16:10:48,150 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 16:10:48,151 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-25 16:10:48,152 - ERROR - Error extracting features for note ID 1: dictionary update sequence element #0 has length 1; 2 is required
2025-05-25 16:10:48,152 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 16:10:48,153 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 16:10:48,155 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 16:10:48,161 - WARNING - Extracted symptoms do not match expected symptoms: ['headache', 'photophobia']. Using knowledge base fallback.
2025-05-25 17:29:43,037 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 17:29:43,038 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 17:29:43,038 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 17:29:43,039 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 17:29:43,040 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 17:29:43,040 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 17:29:43,041 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 17:29:43,041 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 17:29:43,042 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 17:29:43,043 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 17:29:45,136 - ERROR - Failed to initialize NLP pipeline: 'NoneType' object has no attribute 'startswith'
2025-05-25 17:29:46,579 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 17:29:47,730 - ERROR - Failed to initialize NLP pipeline: 'NoneType' object has no attribute 'startswith'
2025-05-25 17:29:48,839 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 17:29:48,839 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 17:29:50,200 - ERROR - Failed to initialize NLP pipeline: 'NoneType' object has no attribute 'startswith'
2025-05-25 17:29:51,554 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 17:29:51,599 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 17:29:51,634 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 17:29:51,635 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-25 17:29:51,635 - ERROR - Error extracting features for note ID 1: dictionary update sequence element #0 has length 1; 2 is required
2025-05-25 17:29:51,636 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 17:29:51,637 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 17:29:51,638 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 17:29:51,647 - WARNING - Extracted symptoms do not match expected symptoms: ['headache', 'photophobia']. Using knowledge base fallback.
2025-05-25 17:39:38,793 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 17:39:38,794 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 17:39:38,794 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 17:39:38,795 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 17:39:38,795 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 17:39:38,796 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 17:39:38,796 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 17:39:38,797 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 17:39:38,798 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 17:39:38,799 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 17:39:40,772 - ERROR - Failed to initialize NLP pipeline: 

Config validation error
medspacy_context -> rules_path	extra fields not permitted
{'nlp': <spacy.lang.en.English object at 0x709f1bb55b90>, 'name': 'medspacy_context', 'rules_path': None, '@factories': 'medspacy_context'}
2025-05-25 17:39:41,940 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 17:39:43,122 - ERROR - Failed to initialize NLP pipeline: 

Config validation error
medspacy_context -> rules_path	extra fields not permitted
{'nlp': <spacy.lang.en.English object at 0x709efbb00350>, 'name': 'medspacy_context', 'rules_path': None, '@factories': 'medspacy_context'}
2025-05-25 17:39:44,298 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 17:39:44,299 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 17:39:45,545 - ERROR - Failed to initialize NLP pipeline: 

Config validation error
medspacy_context -> rules_path	extra fields not permitted
{'nlp': <spacy.lang.en.English object at 0x709ef9c748d0>, 'name': 'medspacy_context', 'rules_path': None, '@factories': 'medspacy_context'}
2025-05-25 17:39:46,700 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 17:39:46,736 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 17:39:46,766 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 17:39:46,766 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-25 17:39:46,767 - ERROR - Error extracting features for note ID 1: dictionary update sequence element #0 has length 1; 2 is required
2025-05-25 17:39:46,767 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 17:39:46,768 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 17:39:46,770 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 17:39:46,782 - WARNING - Extracted symptoms do not match expected symptoms: ['headache', 'photophobia']. Using knowledge base fallback.
2025-05-25 17:46:08,919 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 17:46:08,920 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 17:46:08,920 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 17:46:08,921 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 17:46:08,921 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 17:46:08,921 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 17:46:08,922 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 17:46:08,922 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 17:46:08,923 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 17:46:08,924 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 17:48:07,605 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 17:48:08,702 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 17:50:24,026 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 17:50:25,545 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 17:50:25,546 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 17:52:39,170 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 17:52:40,723 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 17:52:40,760 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 17:52:40,798 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 17:52:40,799 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-25 17:52:40,799 - ERROR - Error extracting features for note ID 1: dictionary update sequence element #0 has length 1; 2 is required
2025-05-25 17:52:40,801 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 17:52:40,802 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 17:52:40,806 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 17:52:40,815 - WARNING - Extracted symptoms do not match expected symptoms: ['headache', 'photophobia']. Using knowledge base fallback.
2025-05-25 17:54:41,769 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 17:54:41,770 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 17:54:41,771 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 17:54:41,771 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 17:54:41,772 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 17:54:41,772 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 17:54:41,773 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 17:54:41,773 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 17:54:41,774 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 17:54:41,775 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 17:56:41,447 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 17:56:42,937 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 17:58:53,299 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 17:58:54,818 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 17:58:54,819 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 18:00:55,673 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 18:00:57,259 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 18:00:57,297 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 18:00:57,333 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 18:00:57,335 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-25 18:00:57,336 - ERROR - Error extracting features for note ID 1: dictionary update sequence element #0 has length 1; 2 is required
2025-05-25 18:00:57,337 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 18:00:57,337 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 18:00:57,342 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 18:00:57,358 - WARNING - Extracted symptoms do not match expected symptoms: ['headache', 'photophobia']. Using knowledge base fallback.
2025-05-25 18:14:45,959 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 18:14:45,960 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 18:14:45,961 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 18:14:45,962 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 18:14:45,963 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 18:14:45,963 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 18:14:45,964 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 18:14:45,964 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 18:14:45,965 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 18:14:45,966 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 18:16:40,893 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 18:16:42,406 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 18:19:09,431 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 18:19:11,325 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 18:19:11,326 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 18:21:24,954 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 18:21:26,636 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 18:21:26,675 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 18:21:26,715 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 18:21:26,716 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-25 18:21:26,716 - ERROR - Error extracting features for note ID 1: dictionary update sequence element #0 has length 1; 2 is required
2025-05-25 18:21:26,717 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 18:21:26,717 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 18:21:26,719 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 18:21:26,729 - WARNING - Extracted symptoms do not match expected symptoms: ['headache', 'photophobia']. Using knowledge base fallback.
2025-05-25 18:34:28,768 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 18:34:28,768 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 18:34:28,769 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 18:34:28,769 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 18:34:28,769 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 18:34:28,770 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 18:34:28,770 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 18:34:28,771 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 18:34:28,771 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 18:34:28,772 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 18:36:29,527 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 18:36:31,261 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 18:38:45,077 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 18:38:46,625 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 18:38:46,626 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 18:41:07,736 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 18:41:09,530 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 18:41:09,566 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 18:41:09,611 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 18:41:09,612 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-25 18:41:09,614 - ERROR - Error extracting features for note ID 1: dictionary update sequence element #0 has length 1; 2 is required
2025-05-25 18:41:09,615 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 18:41:09,617 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 18:41:09,621 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 18:41:09,634 - WARNING - Extracted symptoms do not match expected symptoms: ['headache', 'photophobia']. Using knowledge base fallback.
2025-05-25 18:43:46,785 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 18:43:46,786 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 18:43:46,787 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 18:43:46,787 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 18:43:46,787 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 18:43:46,788 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 18:43:46,788 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 18:43:46,789 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 18:43:46,789 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 18:43:46,790 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 18:45:46,639 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 18:45:47,983 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 18:47:55,951 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 18:47:57,266 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 18:47:57,267 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 18:50:03,351 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 18:50:04,638 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 18:50:04,677 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 18:50:04,711 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 18:50:04,712 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-25 18:50:04,712 - ERROR - Error extracting features for note ID 1: dictionary update sequence element #0 has length 1; 2 is required
2025-05-25 18:50:04,713 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 18:50:04,713 - WARNING - No patient_id for differential diagnosis, using default values
2025-05-25 18:50:04,716 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 18:50:04,725 - WARNING - Extracted symptoms do not match expected symptoms: ['headache', 'photophobia']. Using knowledge base fallback.
2025-05-25 19:27:17,388 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 19:27:17,389 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 19:27:17,389 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 19:27:17,389 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 19:27:17,389 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 19:27:17,390 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 19:27:17,390 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 19:27:17,390 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 19:27:17,391 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 19:27:17,391 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 19:28:54,935 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 19:28:55,863 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 19:30:28,223 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 19:30:29,145 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 19:30:29,145 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 19:30:29,212 - WARNING - No category mapping found for 'mood changes ophthalmologic no vision changes primary assessment symptoms consistent acute bacterial sinusitis likely secondary to recent viral upper respiratory infection differential includes viral sinusitis'. Defaulting to 'general'.
2025-05-25 19:30:29,219 - WARNING - No category mapping found for 'acute abnormalities in pulmonary musculoskeletal gi gu hematologic dermatologic psychiatric'. Defaulting to 'general'.
2025-05-25 19:30:40,187 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 19:30:40,596 - ERROR - UMLS synonym generation failed for 'patient presents with facial pain': 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/search/current?string=patient+presents+with+facial+pain&ticket=&searchType=exact&sabs=SNOMEDCT_US
2025-05-25 19:30:41,897 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 19:30:42,224 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 19:30:42,641 - ERROR - Error saving knowledge base to JSON: Object of type ObjectId is not JSON serializable
2025-05-25 19:30:42,642 - ERROR - Error extracting features for note ID 1: extract_location() takes 1 positional argument but 2 were given
2025-05-25 19:30:42,665 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 19:30:42,666 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 19:30:42,666 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 19:30:42,667 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 19:30:42,667 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 19:30:42,668 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 19:30:42,668 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 19:30:42,668 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 19:30:42,668 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 19:30:42,669 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 19:32:18,458 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 19:32:19,388 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 19:33:49,120 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 19:33:50,032 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 19:33:50,033 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 19:33:50,085 - WARNING - No category mapping found for 'mood changes ophthalmologic no vision changes primary assessment symptoms consistent acute bacterial sinusitis likely secondary to recent viral upper respiratory infection differential includes viral sinusitis'. Defaulting to 'general'.
2025-05-25 19:33:50,094 - WARNING - No category mapping found for 'acute abnormalities in pulmonary musculoskeletal gi gu hematologic dermatologic psychiatric'. Defaulting to 'general'.
2025-05-25 19:33:50,097 - WARNING - Missing symptoms: ['patient presents with facial pain, nasal congestion, and fever for 10 days. reports purulent nasal discharge.']. Initiating knowledge base update.
2025-05-25 19:33:52,291 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 19:33:52,919 - ERROR - UMLS synonym generation failed for 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses': 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/search/current?string=and+fever+for+10+days.+reports+purulent+nasal+discharge.+facial+pain+over+maxillary+sinuses&ticket=&searchType=exact&sabs=SNOMEDCT_US
2025-05-25 19:33:54,447 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 19:33:54,951 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 19:33:55,261 - ERROR - Error saving knowledge base to JSON: Object of type ObjectId is not JSON serializable
2025-05-25 19:33:55,262 - ERROR - Error extracting features for note ID 1: extract_location() takes 1 positional argument but 2 were given
2025-05-25 19:33:55,279 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 19:33:55,280 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 19:33:55,280 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 19:33:55,280 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 19:33:55,281 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 19:33:55,281 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 19:33:55,281 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 19:33:55,281 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 19:33:55,282 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 19:33:55,282 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 19:35:33,986 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 19:35:34,924 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 19:37:09,155 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 19:37:10,052 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 19:37:10,052 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 19:38:42,106 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 19:38:43,025 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 19:38:43,070 - WARNING - No category mapping found for 'mood changes ophthalmologic no vision changes primary assessment symptoms consistent acute bacterial sinusitis likely secondary to recent viral upper respiratory infection differential includes viral sinusitis'. Defaulting to 'general'.
2025-05-25 19:38:43,079 - WARNING - No category mapping found for 'acute abnormalities in pulmonary musculoskeletal gi gu hematologic dermatologic psychiatric'. Defaulting to 'general'.
2025-05-25 19:38:43,149 - WARNING - No category mapping found for 'mood changes ophthalmologic no vision changes primary assessment symptoms consistent acute bacterial sinusitis likely secondary to recent viral upper respiratory infection differential includes viral sinusitis'. Defaulting to 'general'.
2025-05-25 19:38:43,157 - WARNING - No category mapping found for 'acute abnormalities in pulmonary musculoskeletal gi gu hematologic dermatologic psychiatric'. Defaulting to 'general'.
2025-05-25 19:38:46,010 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 19:38:46,412 - ERROR - UMLS synonym generation failed for 'bilateral nasal congestion': 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/search/current?string=bilateral+nasal+congestion&ticket=&searchType=exact&sabs=SNOMEDCT_US
2025-05-25 19:38:47,880 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 19:38:48,450 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 19:38:48,844 - ERROR - Error saving knowledge base to JSON: Object of type ObjectId is not JSON serializable
2025-05-25 19:38:48,847 - ERROR - Error extracting features for note ID 1: extract_location() takes 1 positional argument but 2 were given
2025-05-25 19:38:48,848 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 19:38:48,855 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 19:38:48,860 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 19:38:48,861 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 19:38:48,862 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 19:38:48,863 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 19:38:48,865 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 19:38:48,866 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 19:38:48,867 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 19:38:48,867 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 19:38:48,868 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 19:38:48,870 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 19:38:48,973 - WARNING - Extracted symptoms do not match expected symptoms: ['facial pain', 'nasal congestion', 'purulent nasal discharge']. Using knowledge base fallback.
2025-05-25 19:38:59,868 - ERROR - Failed to get UTS ticket: HTTPSConnectionPool(host='uts-ws.nlm.nih.gov', port=443): Read timed out. (read timeout=10)
2025-05-25 19:39:01,320 - ERROR - UMLS synonym generation failed for 'back pain for two weeks the patient reports backpain for three weeks on assessment': 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/search/current?string=back+pain+for+two+weeks+the+patient+reports+backpain+for+three+weeks+on+assessment&ticket=&searchType=exact&sabs=SNOMEDCT_US
2025-05-25 19:39:02,771 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 19:39:03,103 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 19:39:03,436 - ERROR - Error saving knowledge base to JSON: Object of type ObjectId is not JSON serializable
2025-05-25 19:39:03,437 - ERROR - Error extracting features for note ID 2: extract_location() takes 1 positional argument but 2 were given
2025-05-25 19:39:03,456 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 19:39:03,456 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 19:39:03,457 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 19:39:03,457 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 19:39:03,458 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 19:39:03,459 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 19:39:03,459 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 19:39:03,460 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 19:39:03,460 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 19:39:03,460 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 19:39:04,381 - WARNING - Invalid category for symptom 'bilateral nasal congestion': genitourinary
2025-05-25 19:40:40,949 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 19:40:41,876 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 19:40:42,579 - WARNING - Invalid category for symptom 'bilateral nasal congestion': genitourinary
2025-05-25 19:42:13,829 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 19:42:14,694 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 19:42:14,695 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 19:42:16,988 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 19:42:17,344 - ERROR - UMLS synonym generation failed for 'the patient is obese the backpain is made worse by sitting down for long the pain is alleviated by standing and stretching': 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/search/current?string=the+patient+is+obese+the+backpain+is+made+worse+by+sitting+down+for+long+the+pain+is+alleviated+by+standing+and+stretching&ticket=&searchType=exact&sabs=SNOMEDCT_US
2025-05-25 19:42:19,276 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 19:42:19,891 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 19:42:20,256 - ERROR - Error saving knowledge base to JSON: Object of type ObjectId is not JSON serializable
2025-05-25 19:42:20,257 - ERROR - Error extracting features for note ID 2: extract_location() takes 1 positional argument but 2 were given
2025-05-25 19:42:20,283 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 19:42:20,284 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 19:42:20,284 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 19:42:20,284 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 19:42:20,285 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 19:42:20,285 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 19:42:20,285 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 19:42:20,285 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 19:42:20,286 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 19:42:20,286 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 19:42:21,298 - WARNING - Invalid category for symptom 'bilateral nasal congestion': genitourinary
2025-05-25 19:43:53,742 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 19:43:54,686 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 19:43:55,544 - WARNING - Invalid category for symptom 'bilateral nasal congestion': genitourinary
2025-05-25 19:45:29,874 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 19:45:30,907 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 19:45:30,908 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 19:45:31,919 - WARNING - Invalid category for symptom 'bilateral nasal congestion': genitourinary
2025-05-25 19:47:12,236 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 19:47:13,190 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 19:47:13,228 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-25 19:47:13,228 - ERROR - Error extracting features for note ID 2: dictionary update sequence element #0 has length 1; 2 is required
2025-05-25 19:47:13,229 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 19:47:13,230 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 19:47:13,235 - WARNING - Extracted symptoms do not match expected symptoms: ['back pain']. Using knowledge base fallback.
2025-05-25 19:47:13,275 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-25 19:47:13,276 - ERROR - Error extracting features for note ID 3: dictionary update sequence element #0 has length 1; 2 is required
2025-05-25 19:47:14,075 - WARNING - Invalid category for symptom 'bilateral nasal congestion': genitourinary
2025-05-25 19:48:47,024 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 19:48:48,013 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 19:48:48,762 - WARNING - Invalid category for symptom 'bilateral nasal congestion': genitourinary
2025-05-25 19:50:28,718 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 19:50:29,792 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 19:50:29,793 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 19:50:29,817 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-25 19:50:29,818 - ERROR - Error extracting features for note ID 3: dictionary update sequence element #0 has length 1; 2 is required
2025-05-25 19:50:30,839 - WARNING - Invalid category for symptom 'bilateral nasal congestion': genitourinary
2025-05-25 19:52:18,324 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 19:52:19,656 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 19:52:20,756 - WARNING - Invalid category for symptom 'bilateral nasal congestion': genitourinary
2025-05-25 19:53:58,953 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 19:54:00,018 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 19:54:00,018 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 19:54:00,913 - WARNING - Invalid category for symptom 'bilateral nasal congestion': genitourinary
2025-05-25 19:55:38,375 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 19:55:39,417 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 19:55:39,434 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 19:55:39,456 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-25 19:55:39,456 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-25 19:55:39,456 - ERROR - Error extracting features for note ID 3: dictionary update sequence element #0 has length 1; 2 is required
2025-05-25 19:55:39,456 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-25 19:55:39,459 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-25 19:55:39,461 - WARNING - Extracted symptoms do not match expected symptoms: ['headache', 'photophobia']. Using knowledge base fallback.
2025-05-25 20:05:00,957 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 20:05:00,957 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 20:05:00,957 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 20:05:00,958 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 20:05:00,958 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 20:05:00,958 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 20:05:00,958 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 20:05:00,959 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 20:05:00,959 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 20:05:00,959 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 20:05:25,069 - WARNING - Invalid category for symptom 'bilateral nasal congestion': genitourinary
2025-05-25 20:06:15,665 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 20:06:15,667 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 20:06:15,669 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 20:06:15,671 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 20:06:15,671 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 20:06:15,672 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 20:06:15,672 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 20:06:15,672 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 20:06:15,673 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 20:06:15,673 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 20:07:05,439 - WARNING - Invalid category for symptom 'bilateral nasal congestion': genitourinary
2025-05-25 20:08:22,104 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 20:08:23,187 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 20:08:46,592 - WARNING - Invalid category for symptom 'bilateral nasal congestion': genitourinary
2025-05-25 20:09:57,929 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 20:09:59,743 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 20:10:26,024 - WARNING - Invalid category for symptom 'bilateral nasal congestion': genitourinary
2025-05-25 20:11:37,892 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 20:11:41,114 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 20:11:41,118 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 20:11:41,432 - WARNING - No category mapping found for 'mood changes ophthalmologic no vision changes primary assessment symptoms consistent acute bacterial sinusitis likely secondary to recent viral upper respiratory infection differential includes viral sinusitis'. Defaulting to 'general'.
2025-05-25 20:11:41,449 - WARNING - No category mapping found for 'acute abnormalities in pulmonary musculoskeletal gi gu hematologic dermatologic psychiatric'. Defaulting to 'general'.
2025-05-25 20:12:43,907 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 20:12:44,259 - ERROR - UMLS synonym generation failed for 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses': 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/search/current?string=and+fever+for+10+days.+reports+purulent+nasal+discharge.+facial+pain+over+maxillary+sinuses&ticket=&searchType=exact&sabs=SNOMEDCT_US
2025-05-25 20:12:46,478 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 20:12:46,811 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 20:12:48,679 - ERROR - Error saving knowledge base to JSON: Object of type ObjectId is not JSON serializable
2025-05-25 20:12:48,688 - ERROR - Error extracting features for note ID 1: extract_location() takes 1 positional argument but 2 were given
2025-05-25 20:12:48,894 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 20:12:48,894 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 20:12:48,894 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 20:12:48,895 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 20:12:48,895 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 20:12:48,895 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 20:12:48,895 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 20:12:48,896 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 20:12:48,896 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 20:12:48,896 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 20:13:25,154 - WARNING - Invalid category for symptom 'bilateral nasal congestion': genitourinary
2025-05-25 20:15:50,008 - WARNING - Failed to add scispacy_linker: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response')). Continuing without UMLS linking.
2025-05-25 20:16:00,934 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 20:16:02,826 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 20:16:02,827 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 20:16:02,942 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 20:16:02,943 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 20:16:02,943 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 20:16:02,943 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 20:16:02,944 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 20:16:02,944 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 20:16:02,944 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 20:16:02,945 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 20:16:02,945 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 20:16:02,945 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 20:16:03,225 - WARNING - No category mapping found for 'mood changes ophthalmologic no vision changes primary assessment symptoms consistent acute bacterial sinusitis likely secondary to recent viral upper respiratory infection differential includes viral sinusitis'. Defaulting to 'general'.
2025-05-25 20:16:03,245 - WARNING - No category mapping found for 'acute abnormalities in pulmonary musculoskeletal gi gu hematologic dermatologic psychiatric'. Defaulting to 'general'.
2025-05-25 20:16:26,169 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 20:16:26,495 - ERROR - UMLS synonym generation failed for 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses': 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/search/current?string=and+fever+for+10+days.+reports+purulent+nasal+discharge.+facial+pain+over+maxillary+sinuses&ticket=&searchType=exact&sabs=SNOMEDCT_US
2025-05-25 20:16:27,956 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 20:16:29,052 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 20:16:29,598 - ERROR - Error saving knowledge base to JSON: Object of type ObjectId is not JSON serializable
2025-05-25 20:16:29,601 - ERROR - Error extracting features for note ID 1: extract_location() takes 1 positional argument but 2 were given
2025-05-25 20:16:29,644 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 20:16:29,646 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 20:16:29,647 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 20:16:29,648 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 20:16:29,649 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 20:16:29,652 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 20:16:29,654 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 20:16:29,655 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 20:16:29,656 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 20:16:29,658 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 20:17:11,430 - WARNING - Invalid category for symptom 'bilateral nasal congestion': genitourinary
2025-05-25 20:17:21,751 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 20:17:22,659 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 20:17:23,392 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 20:17:23,392 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 20:17:23,392 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 20:17:23,392 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 20:17:23,393 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 20:17:23,393 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 20:17:23,393 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 20:17:23,393 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 20:17:23,394 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 20:17:23,394 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 20:17:52,091 - WARNING - Invalid category for symptom 'bilateral nasal congestion': genitourinary
2025-05-25 20:19:22,005 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 20:19:24,009 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 20:20:08,880 - WARNING - Invalid category for symptom 'bilateral nasal congestion': genitourinary
2025-05-25 20:20:30,471 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 20:20:31,583 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 20:20:31,584 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-25 20:20:31,679 - WARNING - No category mapping found for 'mood changes ophthalmologic no vision changes primary assessment symptoms consistent acute bacterial sinusitis likely secondary to recent viral upper respiratory infection differential includes viral sinusitis'. Defaulting to 'general'.
2025-05-25 20:20:31,686 - WARNING - No category mapping found for 'acute abnormalities in pulmonary musculoskeletal gi gu hematologic dermatologic psychiatric'. Defaulting to 'general'.
2025-05-25 20:20:31,689 - WARNING - Missing symptoms: ['patient presents with facial pain, nasal congestion, and fever for 10 days. reports purulent nasal discharge.']. Initiating knowledge base update.
2025-05-25 20:20:43,575 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 20:20:44,046 - ERROR - UMLS synonym generation failed for 'bilateral nasal congestion': 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/search/current?string=bilateral+nasal+congestion&ticket=&searchType=exact&sabs=SNOMEDCT_US
2025-05-25 20:20:45,688 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 20:20:46,029 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-25 20:20:46,396 - ERROR - Error saving knowledge base to JSON: Object of type ObjectId is not JSON serializable
2025-05-25 20:20:46,396 - ERROR - Error extracting features for note ID 1: extract_location() takes 1 positional argument but 2 were given
2025-05-25 20:20:46,431 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 20:20:46,431 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 20:20:46,432 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 20:20:46,432 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 20:20:46,432 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 20:20:46,432 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 20:20:46,433 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 20:20:46,433 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 20:20:46,433 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 20:20:46,433 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 21:07:02,177 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-25 21:07:02,179 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-25 21:07:02,179 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-25 21:07:02,179 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-25 21:07:02,180 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-25 21:07:02,180 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-25 21:07:02,180 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-25 21:07:02,181 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-25 21:07:02,181 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-25 21:07:02,181 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-25 21:07:08,317 - WARNING - UMLS API returned status 401 for term 'patient complains of headache the headache started three days ago. the headache is associated with fevers and chills'
2025-05-25 21:07:12,605 - WARNING - UMLS API returned status 401 for term 'nausea and vomiting and loss of appetite the patient has jaundice in the eyes taking foods with fats makes the nausea worse taking strong tea and licking salt alleviates the nausea'
2025-05-25 21:07:19,687 - WARNING - UMLS API returned status 401 for term 'patient presents with facial pain'
2025-05-25 21:07:25,624 - WARNING - UMLS API returned status 401 for term 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses'
2025-05-25 21:07:42,929 - WARNING - UMLS API returned status 401 for term 'bilateral nasal congestion'
2025-05-25 21:07:47,128 - WARNING - UMLS API returned status 401 for term 'back pain for two weeks the patient reports backpain for three weeks on assessment'
2025-05-25 21:07:51,655 - WARNING - UMLS API returned status 401 for term 'the patient is obese the backpain is made worse by sitting down for long the pain is alleviated by standing and stretching'
2025-05-25 21:09:17,077 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-25 21:09:18,017 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-25 21:09:22,874 - WARNING - UMLS API returned status 401 for term 'patient complains of headache the headache started three days ago. the headache is associated with fevers and chills'
2025-05-25 21:09:27,584 - WARNING - UMLS API returned status 401 for term 'nausea and vomiting and loss of appetite the patient has jaundice in the eyes taking foods with fats makes the nausea worse taking strong tea and licking salt alleviates the nausea'
2025-05-25 21:09:31,547 - WARNING - UMLS API returned status 401 for term 'patient presents with facial pain'
2025-05-25 21:09:39,463 - WARNING - UMLS API returned status 401 for term 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses'
2025-05-25 21:09:43,559 - WARNING - UMLS API returned status 401 for term 'bilateral nasal congestion'
2025-05-25 21:09:49,361 - WARNING - UMLS API returned status 401 for term 'back pain for two weeks the patient reports backpain for three weeks on assessment'
2025-05-25 21:10:05,576 - WARNING - UMLS API returned status 401 for term 'the patient is obese the backpain is made worse by sitting down for long the pain is alleviated by standing and stretching'
2025-05-26 06:04:29,351 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-26 06:04:29,352 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-26 06:04:29,352 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-26 06:04:29,352 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-26 06:04:29,353 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-26 06:04:29,353 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-26 06:04:29,353 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-26 06:04:29,353 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-26 06:04:29,354 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-26 06:04:29,354 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-26 06:04:35,335 - WARNING - UMLS API returned status 401 for term 'patient complains of headache the headache started three days ago. the headache is associated with fevers and chills'
2025-05-26 06:04:40,048 - WARNING - UMLS API returned status 401 for term 'nausea and vomiting and loss of appetite the patient has jaundice in the eyes taking foods with fats makes the nausea worse taking strong tea and licking salt alleviates the nausea'
2025-05-26 06:04:44,143 - WARNING - UMLS API returned status 401 for term 'patient presents with facial pain'
2025-05-26 06:04:48,342 - WARNING - UMLS API returned status 401 for term 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses'
2025-05-26 06:04:52,540 - WARNING - UMLS API returned status 401 for term 'bilateral nasal congestion'
2025-05-26 06:04:56,868 - WARNING - UMLS API returned status 401 for term 'back pain for two weeks the patient reports backpain for three weeks on assessment'
2025-05-26 06:05:01,040 - WARNING - UMLS API returned status 401 for term 'the patient is obese the backpain is made worse by sitting down for long the pain is alleviated by standing and stretching'
2025-05-26 06:06:28,017 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-26 06:06:28,931 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-26 06:06:34,533 - WARNING - UMLS API returned status 401 for term 'patient complains of headache the headache started three days ago. the headache is associated with fevers and chills'
2025-05-26 06:06:38,834 - WARNING - UMLS API returned status 401 for term 'nausea and vomiting and loss of appetite the patient has jaundice in the eyes taking foods with fats makes the nausea worse taking strong tea and licking salt alleviates the nausea'
2025-05-26 06:06:42,930 - WARNING - UMLS API returned status 401 for term 'patient presents with facial pain'
2025-05-26 06:06:47,208 - WARNING - UMLS API returned status 401 for term 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses'
2025-05-26 06:06:51,429 - WARNING - UMLS API returned status 401 for term 'bilateral nasal congestion'
2025-05-26 06:06:55,707 - WARNING - UMLS API returned status 401 for term 'back pain for two weeks the patient reports backpain for three weeks on assessment'
2025-05-26 06:06:59,929 - WARNING - UMLS API returned status 401 for term 'the patient is obese the backpain is made worse by sitting down for long the pain is alleviated by standing and stretching'
2025-05-26 06:08:28,980 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-26 06:08:29,915 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-26 06:08:29,915 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-26 06:08:30,013 - WARNING - No category mapping found for 'mood changes ophthalmologic no vision changes primary assessment symptoms consistent acute bacterial sinusitis likely secondary to recent viral upper respiratory infection differential includes viral sinusitis'. Defaulting to 'general'.
2025-05-26 06:08:30,021 - WARNING - No category mapping found for 'acute abnormalities in pulmonary musculoskeletal gi gu hematologic dermatologic psychiatric'. Defaulting to 'general'.
2025-05-26 06:08:40,415 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-26 06:08:40,795 - ERROR - UMLS synonym generation failed for 'and purulent nasal discharge for 10 days. low-grade fever (up to 100.5°f). no sore throat or hearing loss. pulmonary: no cough or shortness of breath. cardiovascular: no chest pain or palpitations. neurological: mild headache associated with sinus pain': 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/search/current?string=and+purulent+nasal+discharge+for+10+days.+low-grade+fever+%28up+to+100.5%C2%B0f%29.+no+sore+throat+or+hearing+loss.+pulmonary%3A+no+cough+or+shortness+of+breath.+cardiovascular%3A+no+chest+pain+or+palpitations.+neurological%3A+mild+headache+associated+with+sinus+pain&ticket=&searchType=exact&sabs=SNOMEDCT_US
2025-05-26 06:08:42,331 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-26 06:08:42,741 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-26 06:08:43,125 - ERROR - Error saving knowledge base to JSON: Object of type ObjectId is not JSON serializable
2025-05-26 06:08:43,126 - ERROR - Error extracting features for note ID 1: extract_location() takes 1 positional argument but 2 were given
2025-05-26 06:08:43,150 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-26 06:08:43,150 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-26 06:08:43,151 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-26 06:08:43,151 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-26 06:08:43,151 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-26 06:08:43,151 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-26 06:08:43,152 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-26 06:08:43,152 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-26 06:08:43,152 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-26 06:08:43,153 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-26 06:08:48,373 - WARNING - UMLS API returned status 401 for term 'patient complains of headache the headache started three days ago. the headache is associated with fevers and chills'
2025-05-26 06:08:52,367 - WARNING - UMLS API returned status 401 for term 'nausea and vomiting and loss of appetite the patient has jaundice in the eyes taking foods with fats makes the nausea worse taking strong tea and licking salt alleviates the nausea'
2025-05-26 06:08:56,667 - WARNING - UMLS API returned status 401 for term 'patient presents with facial pain'
2025-05-26 06:09:00,968 - WARNING - UMLS API returned status 401 for term 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses'
2025-05-26 06:09:05,474 - WARNING - UMLS API returned status 401 for term 'bilateral nasal congestion'
2025-05-26 06:09:09,775 - WARNING - UMLS API returned status 401 for term 'back pain for two weeks the patient reports backpain for three weeks on assessment'
2025-05-26 06:09:14,076 - WARNING - UMLS API returned status 401 for term 'the patient is obese the backpain is made worse by sitting down for long the pain is alleviated by standing and stretching'
2025-05-26 06:09:18,376 - WARNING - UMLS API returned status 401 for term 'and purulent nasal discharge for 10 days. low-grade fever (up to 100.5°f). no sore throat or hearing loss. pulmonary: no cough or shortness of breath. cardiovascular: no chest pain or palpitations. neurological: mild headache associated with sinus pain'
2025-05-26 06:10:52,743 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-26 06:10:53,676 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-26 06:11:00,063 - WARNING - UMLS API returned status 401 for term 'patient complains of headache the headache started three days ago. the headache is associated with fevers and chills'
2025-05-26 06:11:04,364 - WARNING - UMLS API returned status 401 for term 'nausea and vomiting and loss of appetite the patient has jaundice in the eyes taking foods with fats makes the nausea worse taking strong tea and licking salt alleviates the nausea'
2025-05-26 06:11:08,664 - WARNING - UMLS API returned status 401 for term 'patient presents with facial pain'
2025-05-26 06:11:13,960 - WARNING - UMLS API returned status 401 for term 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses'
2025-05-26 06:11:18,495 - WARNING - UMLS API returned status 401 for term 'bilateral nasal congestion'
2025-05-26 06:11:24,459 - WARNING - UMLS API returned status 401 for term 'back pain for two weeks the patient reports backpain for three weeks on assessment'
2025-05-26 06:11:28,735 - WARNING - UMLS API returned status 401 for term 'the patient is obese the backpain is made worse by sitting down for long the pain is alleviated by standing and stretching'
2025-05-26 06:11:34,508 - WARNING - UMLS API returned status 401 for term 'and purulent nasal discharge for 10 days. low-grade fever (up to 100.5°f). no sore throat or hearing loss. pulmonary: no cough or shortness of breath. cardiovascular: no chest pain or palpitations. neurological: mild headache associated with sinus pain'
2025-05-26 06:13:04,370 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-26 06:13:05,295 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-26 06:13:05,296 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-26 06:13:05,353 - WARNING - No category mapping found for 'mood changes ophthalmologic no vision changes primary assessment symptoms consistent acute bacterial sinusitis likely secondary to recent viral upper respiratory infection differential includes viral sinusitis'. Defaulting to 'general'.
2025-05-26 06:13:05,364 - WARNING - No category mapping found for 'acute abnormalities in pulmonary musculoskeletal gi gu hematologic dermatologic psychiatric'. Defaulting to 'general'.
2025-05-26 06:13:05,369 - WARNING - Missing symptoms: ['patient presents with facial pain, nasal congestion, and fever for 10 days. reports purulent nasal discharge.']. Initiating knowledge base update.
2025-05-26 06:13:07,864 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-26 06:13:08,274 - ERROR - UMLS synonym generation failed for 'no dizziness. musculoskeletal: no joint pain or stiffness. gastrointestinal: no nausea or diarrhea. genitourinary: no urinary changes. endocrine: no weight changes or thirst. hematologic: no easy bruising or bleeding. dermatologic: no rashes or lesions. psychiatric: no mood changes. ophthalmologic: no vision changes. primary assessment: symptoms consistent with acute bacterial sinusitis': 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/search/current?string=no+dizziness.+musculoskeletal%3A+no+joint+pain+or+stiffness.+gastrointestinal%3A+no+nausea+or+diarrhea.+genitourinary%3A+no+urinary+changes.+endocrine%3A+no+weight+changes+or+thirst.+hematologic%3A+no+easy+bruising+or+bleeding.+dermatologic%3A+no+rashes+or+lesions.+psychiatric%3A+no+mood+changes.+ophthalmologic%3A+no+vision+changes.+primary+assessment%3A+symptoms+consistent+with+acute+bacterial+sinusitis&ticket=&searchType=exact&sabs=SNOMEDCT_US
2025-05-26 06:13:09,911 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-26 06:13:10,318 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-26 06:13:10,656 - ERROR - Error saving knowledge base to JSON: Object of type ObjectId is not JSON serializable
2025-05-26 06:13:10,657 - ERROR - Error extracting features for note ID 1: extract_location() takes 1 positional argument but 2 were given
2025-05-26 06:13:10,678 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-26 06:13:10,678 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-26 06:13:10,679 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-26 06:13:10,679 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-26 06:13:10,679 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-26 06:13:10,679 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-26 06:13:10,680 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-26 06:13:10,680 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-26 06:13:10,680 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-26 06:13:10,681 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-26 06:13:16,567 - WARNING - UMLS API returned status 401 for term 'patient complains of headache the headache started three days ago. the headache is associated with fevers and chills'
2025-05-26 06:13:22,911 - WARNING - UMLS API returned status 401 for term 'nausea and vomiting and loss of appetite the patient has jaundice in the eyes taking foods with fats makes the nausea worse taking strong tea and licking salt alleviates the nausea'
2025-05-26 06:13:28,136 - WARNING - UMLS API returned status 401 for term 'patient presents with facial pain'
2025-05-26 06:13:32,438 - WARNING - UMLS API returned status 401 for term 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses'
2025-05-26 06:13:36,841 - WARNING - UMLS API returned status 401 for term 'bilateral nasal congestion'
2025-05-26 06:13:41,450 - WARNING - UMLS API returned status 401 for term 'back pain for two weeks the patient reports backpain for three weeks on assessment'
2025-05-26 06:13:45,647 - WARNING - UMLS API returned status 401 for term 'the patient is obese the backpain is made worse by sitting down for long the pain is alleviated by standing and stretching'
2025-05-26 06:13:50,050 - WARNING - UMLS API returned status 401 for term 'and purulent nasal discharge for 10 days. low-grade fever (up to 100.5°f). no sore throat or hearing loss. pulmonary: no cough or shortness of breath. cardiovascular: no chest pain or palpitations. neurological: mild headache associated with sinus pain'
2025-05-26 06:13:55,070 - WARNING - UMLS API returned status 401 for term 'no dizziness. musculoskeletal: no joint pain or stiffness. gastrointestinal: no nausea or diarrhea. genitourinary: no urinary changes. endocrine: no weight changes or thirst. hematologic: no easy bruising or bleeding. dermatologic: no rashes or lesions. psychiatric: no mood changes. ophthalmologic: no vision changes. primary assessment: symptoms consistent with acute bacterial sinusitis'
2025-05-26 06:15:29,452 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-26 06:15:30,376 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-26 06:15:35,731 - WARNING - UMLS API returned status 401 for term 'patient complains of headache the headache started three days ago. the headache is associated with fevers and chills'
2025-05-26 06:15:40,136 - WARNING - UMLS API returned status 401 for term 'nausea and vomiting and loss of appetite the patient has jaundice in the eyes taking foods with fats makes the nausea worse taking strong tea and licking salt alleviates the nausea'
2025-05-26 06:15:45,366 - WARNING - UMLS API returned status 401 for term 'patient presents with facial pain'
2025-05-26 06:15:50,066 - WARNING - UMLS API returned status 401 for term 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses'
2025-05-26 06:15:54,982 - WARNING - UMLS API returned status 401 for term 'bilateral nasal congestion'
2025-05-26 06:16:01,392 - WARNING - UMLS API returned status 401 for term 'back pain for two weeks the patient reports backpain for three weeks on assessment'
2025-05-26 06:16:06,245 - WARNING - UMLS API returned status 401 for term 'the patient is obese the backpain is made worse by sitting down for long the pain is alleviated by standing and stretching'
2025-05-26 06:16:10,649 - WARNING - UMLS API returned status 401 for term 'and purulent nasal discharge for 10 days. low-grade fever (up to 100.5°f). no sore throat or hearing loss. pulmonary: no cough or shortness of breath. cardiovascular: no chest pain or palpitations. neurological: mild headache associated with sinus pain'
2025-05-26 06:16:15,277 - WARNING - UMLS API returned status 401 for term 'no dizziness. musculoskeletal: no joint pain or stiffness. gastrointestinal: no nausea or diarrhea. genitourinary: no urinary changes. endocrine: no weight changes or thirst. hematologic: no easy bruising or bleeding. dermatologic: no rashes or lesions. psychiatric: no mood changes. ophthalmologic: no vision changes. primary assessment: symptoms consistent with acute bacterial sinusitis'
2025-05-26 06:17:52,311 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-26 06:17:53,221 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-26 06:17:53,222 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-26 06:17:58,270 - WARNING - UMLS API returned status 401 for term 'patient complains of headache the headache started three days ago. the headache is associated with fevers and chills'
2025-05-26 06:18:02,700 - WARNING - UMLS API returned status 401 for term 'nausea and vomiting and loss of appetite the patient has jaundice in the eyes taking foods with fats makes the nausea worse taking strong tea and licking salt alleviates the nausea'
2025-05-26 06:18:07,397 - WARNING - UMLS API returned status 401 for term 'patient presents with facial pain'
2025-05-26 06:18:11,693 - WARNING - UMLS API returned status 401 for term 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses'
2025-05-26 06:18:16,705 - WARNING - UMLS API returned status 401 for term 'bilateral nasal congestion'
2025-05-26 06:18:21,110 - WARNING - UMLS API returned status 401 for term 'back pain for two weeks the patient reports backpain for three weeks on assessment'
2025-05-26 06:18:27,977 - WARNING - UMLS API returned status 401 for term 'the patient is obese the backpain is made worse by sitting down for long the pain is alleviated by standing and stretching'
2025-05-26 06:18:32,876 - WARNING - UMLS API returned status 401 for term 'and purulent nasal discharge for 10 days. low-grade fever (up to 100.5°f). no sore throat or hearing loss. pulmonary: no cough or shortness of breath. cardiovascular: no chest pain or palpitations. neurological: mild headache associated with sinus pain'
2025-05-26 06:18:37,182 - WARNING - UMLS API returned status 401 for term 'no dizziness. musculoskeletal: no joint pain or stiffness. gastrointestinal: no nausea or diarrhea. genitourinary: no urinary changes. endocrine: no weight changes or thirst. hematologic: no easy bruising or bleeding. dermatologic: no rashes or lesions. psychiatric: no mood changes. ophthalmologic: no vision changes. primary assessment: symptoms consistent with acute bacterial sinusitis'
2025-05-26 06:20:06,802 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-26 06:20:07,725 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-26 06:20:07,766 - WARNING - No category mapping found for 'mood changes ophthalmologic no vision changes primary assessment symptoms consistent acute bacterial sinusitis likely secondary to recent viral upper respiratory infection differential includes viral sinusitis'. Defaulting to 'general'.
2025-05-26 06:20:07,774 - WARNING - No category mapping found for 'acute abnormalities in pulmonary musculoskeletal gi gu hematologic dermatologic psychiatric'. Defaulting to 'general'.
2025-05-26 06:20:07,876 - WARNING - No category mapping found for 'mood changes ophthalmologic no vision changes primary assessment symptoms consistent acute bacterial sinusitis likely secondary to recent viral upper respiratory infection differential includes viral sinusitis'. Defaulting to 'general'.
2025-05-26 06:20:07,898 - WARNING - No category mapping found for 'acute abnormalities in pulmonary musculoskeletal gi gu hematologic dermatologic psychiatric'. Defaulting to 'general'.
2025-05-26 06:20:10,227 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-26 06:20:10,551 - ERROR - UMLS synonym generation failed for 'likely secondary to recent viral upper respiratory infection. differential includes viral sinusitis or allergic rhinitis. other systems: neurological: headache likely related to sinusitis. endocrine: stable diabetes. cardiovascular: stable hypertension. no acute abnormalities in pulmonary': 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/search/current?string=likely+secondary+to+recent+viral+upper+respiratory+infection.+differential+includes+viral+sinusitis+or+allergic+rhinitis.+other+systems%3A+neurological%3A+headache+likely+related+to+sinusitis.+endocrine%3A+stable+diabetes.+cardiovascular%3A+stable+hypertension.+no+acute+abnormalities+in+pulmonary&ticket=&searchType=exact&sabs=SNOMEDCT_US
2025-05-26 06:20:11,971 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-26 06:20:12,299 - ERROR - Failed to get UTS ticket: 401 Client Error: Unauthorized for url: https://uts-ws.nlm.nih.gov/rest/tickets
2025-05-26 06:20:12,754 - ERROR - Error saving knowledge base to JSON: Object of type ObjectId is not JSON serializable
2025-05-26 06:20:12,758 - ERROR - Error extracting features for note ID 1: extract_location() takes 1 positional argument but 2 were given
2025-05-26 06:20:12,759 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-26 06:20:12,768 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-26 06:20:12,774 - WARNING - Diagnosis relevance weights for facial pain|nasal congestion|sinusitis|sinus pain|purulent nasal discharge do not sum to 1.0: 0
2025-05-26 06:20:12,775 - WARNING - Diagnosis relevance weights for cough do not sum to 1.0: 0
2025-05-26 06:20:12,776 - WARNING - Diagnosis relevance weights for headache|photophobia do not sum to 1.0: 0
2025-05-26 06:20:12,777 - WARNING - Diagnosis relevance weights for chest pain|shortness of breath|chest tightness do not sum to 1.0: 0
2025-05-26 06:20:12,778 - WARNING - Diagnosis relevance weights for epigastric pain|nausea do not sum to 1.0: 0
2025-05-26 06:20:12,779 - WARNING - Diagnosis relevance weights for knee pain|swelling do not sum to 1.0: 0
2025-05-26 06:20:12,780 - WARNING - Diagnosis relevance weights for back pain|lower back pain|backache do not sum to 1.0: 0
2025-05-26 06:20:12,781 - WARNING - Diagnosis relevance weights for fever|chills do not sum to 1.0: 0
2025-05-26 06:20:12,782 - WARNING - Diagnosis relevance weights for fatigue|obesity do not sum to 1.0: 0
2025-05-26 06:20:12,783 - WARNING - Diagnosis angina relevance weights do not sum to 1.0: 0.8
2025-05-26 06:20:12,872 - WARNING - Extracted symptoms do not match expected symptoms: ['facial pain', 'nasal congestion', 'purulent nasal discharge']. Using knowledge base fallback.
2025-05-26 06:20:12,909 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-26 06:20:12,910 - ERROR - Error extracting features for note ID 2: dictionary update sequence element #0 has length 1; 2 is required
2025-05-26 06:20:17,929 - WARNING - UMLS API returned status 401 for term 'patient complains of headache the headache started three days ago. the headache is associated with fevers and chills'
2025-05-26 06:20:22,031 - WARNING - UMLS API returned status 401 for term 'nausea and vomiting and loss of appetite the patient has jaundice in the eyes taking foods with fats makes the nausea worse taking strong tea and licking salt alleviates the nausea'
2025-05-26 06:20:26,408 - WARNING - UMLS API returned status 401 for term 'patient presents with facial pain'
2025-05-26 06:20:30,814 - WARNING - UMLS API returned status 401 for term 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses'
2025-05-26 06:20:35,629 - WARNING - UMLS API returned status 401 for term 'bilateral nasal congestion'
2025-05-26 06:20:40,137 - WARNING - UMLS API returned status 401 for term 'back pain for two weeks the patient reports backpain for three weeks on assessment'
2025-05-26 06:20:44,427 - WARNING - UMLS API returned status 401 for term 'the patient is obese the backpain is made worse by sitting down for long the pain is alleviated by standing and stretching'
2025-05-26 06:20:49,025 - WARNING - UMLS API returned status 401 for term 'and purulent nasal discharge for 10 days. low-grade fever (up to 100.5°f). no sore throat or hearing loss. pulmonary: no cough or shortness of breath. cardiovascular: no chest pain or palpitations. neurological: mild headache associated with sinus pain'
2025-05-26 06:20:53,120 - WARNING - UMLS API returned status 401 for term 'no dizziness. musculoskeletal: no joint pain or stiffness. gastrointestinal: no nausea or diarrhea. genitourinary: no urinary changes. endocrine: no weight changes or thirst. hematologic: no easy bruising or bleeding. dermatologic: no rashes or lesions. psychiatric: no mood changes. ophthalmologic: no vision changes. primary assessment: symptoms consistent with acute bacterial sinusitis'
2025-05-26 06:20:58,312 - WARNING - UMLS API returned status 401 for term 'likely secondary to recent viral upper respiratory infection. differential includes viral sinusitis or allergic rhinitis. other systems: neurological: headache likely related to sinusitis. endocrine: stable diabetes. cardiovascular: stable hypertension. no acute abnormalities in pulmonary'
2025-05-26 06:22:30,944 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-26 06:22:31,872 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-26 06:22:37,319 - WARNING - UMLS API returned status 401 for term 'patient complains of headache the headache started three days ago. the headache is associated with fevers and chills'
2025-05-26 06:22:42,955 - WARNING - UMLS API returned status 401 for term 'nausea and vomiting and loss of appetite the patient has jaundice in the eyes taking foods with fats makes the nausea worse taking strong tea and licking salt alleviates the nausea'
2025-05-26 06:22:48,218 - WARNING - UMLS API returned status 401 for term 'patient presents with facial pain'
2025-05-26 06:22:52,679 - WARNING - UMLS API returned status 401 for term 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses'
2025-05-26 06:22:57,315 - WARNING - UMLS API returned status 401 for term 'bilateral nasal congestion'
2025-05-26 06:23:02,618 - WARNING - UMLS API returned status 401 for term 'back pain for two weeks the patient reports backpain for three weeks on assessment'
2025-05-26 06:23:08,993 - WARNING - UMLS API returned status 401 for term 'the patient is obese the backpain is made worse by sitting down for long the pain is alleviated by standing and stretching'
2025-05-26 06:23:15,891 - WARNING - UMLS API returned status 401 for term 'and purulent nasal discharge for 10 days. low-grade fever (up to 100.5°f). no sore throat or hearing loss. pulmonary: no cough or shortness of breath. cardiovascular: no chest pain or palpitations. neurological: mild headache associated with sinus pain'
2025-05-26 06:23:22,469 - WARNING - UMLS API returned status 401 for term 'no dizziness. musculoskeletal: no joint pain or stiffness. gastrointestinal: no nausea or diarrhea. genitourinary: no urinary changes. endocrine: no weight changes or thirst. hematologic: no easy bruising or bleeding. dermatologic: no rashes or lesions. psychiatric: no mood changes. ophthalmologic: no vision changes. primary assessment: symptoms consistent with acute bacterial sinusitis'
2025-05-26 06:23:27,069 - WARNING - UMLS API returned status 401 for term 'likely secondary to recent viral upper respiratory infection. differential includes viral sinusitis or allergic rhinitis. other systems: neurological: headache likely related to sinusitis. endocrine: stable diabetes. cardiovascular: stable hypertension. no acute abnormalities in pulmonary'
2025-05-26 06:24:57,463 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-26 06:24:58,197 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-26 06:24:58,197 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-26 06:24:58,224 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-26 06:24:58,224 - ERROR - Error extracting features for note ID 2: dictionary update sequence element #0 has length 1; 2 is required
2025-05-26 06:25:03,868 - WARNING - UMLS API returned status 401 for term 'patient complains of headache the headache started three days ago. the headache is associated with fevers and chills'
2025-05-26 06:25:07,996 - WARNING - UMLS API returned status 401 for term 'nausea and vomiting and loss of appetite the patient has jaundice in the eyes taking foods with fats makes the nausea worse taking strong tea and licking salt alleviates the nausea'
2025-05-26 06:25:12,476 - WARNING - UMLS API returned status 401 for term 'patient presents with facial pain'
2025-05-26 06:25:16,687 - WARNING - UMLS API returned status 401 for term 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses'
2025-05-26 06:25:22,107 - WARNING - UMLS API returned status 401 for term 'bilateral nasal congestion'
2025-05-26 06:25:26,817 - WARNING - UMLS API returned status 401 for term 'back pain for two weeks the patient reports backpain for three weeks on assessment'
2025-05-26 06:25:31,232 - WARNING - UMLS API returned status 401 for term 'the patient is obese the backpain is made worse by sitting down for long the pain is alleviated by standing and stretching'
2025-05-26 06:25:35,526 - WARNING - UMLS API returned status 401 for term 'and purulent nasal discharge for 10 days. low-grade fever (up to 100.5°f). no sore throat or hearing loss. pulmonary: no cough or shortness of breath. cardiovascular: no chest pain or palpitations. neurological: mild headache associated with sinus pain'
2025-05-26 06:25:39,623 - WARNING - UMLS API returned status 401 for term 'no dizziness. musculoskeletal: no joint pain or stiffness. gastrointestinal: no nausea or diarrhea. genitourinary: no urinary changes. endocrine: no weight changes or thirst. hematologic: no easy bruising or bleeding. dermatologic: no rashes or lesions. psychiatric: no mood changes. ophthalmologic: no vision changes. primary assessment: symptoms consistent with acute bacterial sinusitis'
2025-05-26 06:25:44,847 - WARNING - UMLS API returned status 401 for term 'likely secondary to recent viral upper respiratory infection. differential includes viral sinusitis or allergic rhinitis. other systems: neurological: headache likely related to sinusitis. endocrine: stable diabetes. cardiovascular: stable hypertension. no acute abnormalities in pulmonary'
2025-05-26 06:27:14,205 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-26 06:27:15,137 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-26 06:27:20,103 - WARNING - UMLS API returned status 401 for term 'patient complains of headache the headache started three days ago. the headache is associated with fevers and chills'
2025-05-26 06:27:24,471 - WARNING - UMLS API returned status 401 for term 'nausea and vomiting and loss of appetite the patient has jaundice in the eyes taking foods with fats makes the nausea worse taking strong tea and licking salt alleviates the nausea'
2025-05-26 06:27:28,668 - WARNING - UMLS API returned status 401 for term 'patient presents with facial pain'
2025-05-26 06:27:33,172 - WARNING - UMLS API returned status 401 for term 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses'
2025-05-26 06:27:37,705 - WARNING - UMLS API returned status 401 for term 'bilateral nasal congestion'
2025-05-26 06:27:41,977 - WARNING - UMLS API returned status 401 for term 'back pain for two weeks the patient reports backpain for three weeks on assessment'
2025-05-26 06:27:46,202 - WARNING - UMLS API returned status 401 for term 'the patient is obese the backpain is made worse by sitting down for long the pain is alleviated by standing and stretching'
2025-05-26 06:27:50,986 - WARNING - UMLS API returned status 401 for term 'and purulent nasal discharge for 10 days. low-grade fever (up to 100.5°f). no sore throat or hearing loss. pulmonary: no cough or shortness of breath. cardiovascular: no chest pain or palpitations. neurological: mild headache associated with sinus pain'
2025-05-26 06:27:56,213 - WARNING - UMLS API returned status 401 for term 'no dizziness. musculoskeletal: no joint pain or stiffness. gastrointestinal: no nausea or diarrhea. genitourinary: no urinary changes. endocrine: no weight changes or thirst. hematologic: no easy bruising or bleeding. dermatologic: no rashes or lesions. psychiatric: no mood changes. ophthalmologic: no vision changes. primary assessment: symptoms consistent with acute bacterial sinusitis'
2025-05-26 06:28:01,633 - WARNING - UMLS API returned status 401 for term 'likely secondary to recent viral upper respiratory infection. differential includes viral sinusitis or allergic rhinitis. other systems: neurological: headache likely related to sinusitis. endocrine: stable diabetes. cardiovascular: stable hypertension. no acute abnormalities in pulmonary'
2025-05-26 06:29:31,523 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-26 06:29:32,466 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-26 06:29:32,467 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-26 06:29:37,455 - WARNING - UMLS API returned status 401 for term 'patient complains of headache the headache started three days ago. the headache is associated with fevers and chills'
2025-05-26 06:29:41,672 - WARNING - UMLS API returned status 401 for term 'nausea and vomiting and loss of appetite the patient has jaundice in the eyes taking foods with fats makes the nausea worse taking strong tea and licking salt alleviates the nausea'
2025-05-26 06:29:45,975 - WARNING - UMLS API returned status 401 for term 'patient presents with facial pain'
2025-05-26 06:29:50,069 - WARNING - UMLS API returned status 401 for term 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses'
2025-05-26 06:29:54,677 - WARNING - UMLS API returned status 401 for term 'bilateral nasal congestion'
2025-05-26 06:29:58,773 - WARNING - UMLS API returned status 401 for term 'back pain for two weeks the patient reports backpain for three weeks on assessment'
2025-05-26 06:30:03,075 - WARNING - UMLS API returned status 401 for term 'the patient is obese the backpain is made worse by sitting down for long the pain is alleviated by standing and stretching'
2025-05-26 06:30:07,477 - WARNING - UMLS API returned status 401 for term 'and purulent nasal discharge for 10 days. low-grade fever (up to 100.5°f). no sore throat or hearing loss. pulmonary: no cough or shortness of breath. cardiovascular: no chest pain or palpitations. neurological: mild headache associated with sinus pain'
2025-05-26 06:30:11,508 - WARNING - UMLS API returned status 401 for term 'no dizziness. musculoskeletal: no joint pain or stiffness. gastrointestinal: no nausea or diarrhea. genitourinary: no urinary changes. endocrine: no weight changes or thirst. hematologic: no easy bruising or bleeding. dermatologic: no rashes or lesions. psychiatric: no mood changes. ophthalmologic: no vision changes. primary assessment: symptoms consistent with acute bacterial sinusitis'
2025-05-26 06:30:15,876 - WARNING - UMLS API returned status 401 for term 'likely secondary to recent viral upper respiratory infection. differential includes viral sinusitis or allergic rhinitis. other systems: neurological: headache likely related to sinusitis. endocrine: stable diabetes. cardiovascular: stable hypertension. no acute abnormalities in pulmonary'
2025-05-26 06:31:52,141 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-26 06:31:53,109 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-26 06:31:53,154 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-26 06:31:53,154 - ERROR - Error extracting features for note ID 2: dictionary update sequence element #0 has length 1; 2 is required
2025-05-26 06:31:53,154 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-26 06:31:53,156 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-26 06:31:53,159 - WARNING - Extracted symptoms do not match expected symptoms: ['back pain']. Using knowledge base fallback.
2025-05-26 06:31:53,188 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-26 06:31:53,189 - ERROR - Error extracting features for note ID 3: dictionary update sequence element #0 has length 1; 2 is required
2025-05-26 06:31:58,077 - WARNING - UMLS API returned status 401 for term 'patient complains of headache the headache started three days ago. the headache is associated with fevers and chills'
2025-05-26 06:32:02,489 - WARNING - UMLS API returned status 401 for term 'nausea and vomiting and loss of appetite the patient has jaundice in the eyes taking foods with fats makes the nausea worse taking strong tea and licking salt alleviates the nausea'
2025-05-26 06:32:06,989 - WARNING - UMLS API returned status 401 for term 'patient presents with facial pain'
2025-05-26 06:32:11,392 - WARNING - UMLS API returned status 401 for term 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses'
2025-05-26 06:32:15,795 - WARNING - UMLS API returned status 401 for term 'bilateral nasal congestion'
2025-05-26 06:32:19,994 - WARNING - UMLS API returned status 401 for term 'back pain for two weeks the patient reports backpain for three weeks on assessment'
2025-05-26 06:32:24,198 - WARNING - UMLS API returned status 401 for term 'the patient is obese the backpain is made worse by sitting down for long the pain is alleviated by standing and stretching'
2025-05-26 06:32:28,289 - WARNING - UMLS API returned status 401 for term 'and purulent nasal discharge for 10 days. low-grade fever (up to 100.5°f). no sore throat or hearing loss. pulmonary: no cough or shortness of breath. cardiovascular: no chest pain or palpitations. neurological: mild headache associated with sinus pain'
2025-05-26 06:32:32,449 - WARNING - UMLS API returned status 401 for term 'no dizziness. musculoskeletal: no joint pain or stiffness. gastrointestinal: no nausea or diarrhea. genitourinary: no urinary changes. endocrine: no weight changes or thirst. hematologic: no easy bruising or bleeding. dermatologic: no rashes or lesions. psychiatric: no mood changes. ophthalmologic: no vision changes. primary assessment: symptoms consistent with acute bacterial sinusitis'
2025-05-26 06:32:36,472 - WARNING - UMLS API returned status 401 for term 'likely secondary to recent viral upper respiratory infection. differential includes viral sinusitis or allergic rhinitis. other systems: neurological: headache likely related to sinusitis. endocrine: stable diabetes. cardiovascular: stable hypertension. no acute abnormalities in pulmonary'
2025-05-26 06:34:09,096 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-26 06:34:09,993 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-26 06:34:15,202 - WARNING - UMLS API returned status 401 for term 'patient complains of headache the headache started three days ago. the headache is associated with fevers and chills'
2025-05-26 06:34:19,402 - WARNING - UMLS API returned status 401 for term 'nausea and vomiting and loss of appetite the patient has jaundice in the eyes taking foods with fats makes the nausea worse taking strong tea and licking salt alleviates the nausea'
2025-05-26 06:34:23,703 - WARNING - UMLS API returned status 401 for term 'patient presents with facial pain'
2025-05-26 06:34:27,902 - WARNING - UMLS API returned status 401 for term 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses'
2025-05-26 06:34:32,100 - WARNING - UMLS API returned status 401 for term 'bilateral nasal congestion'
2025-05-26 06:34:36,196 - WARNING - UMLS API returned status 401 for term 'back pain for two weeks the patient reports backpain for three weeks on assessment'
2025-05-26 06:34:40,395 - WARNING - UMLS API returned status 401 for term 'the patient is obese the backpain is made worse by sitting down for long the pain is alleviated by standing and stretching'
2025-05-26 06:34:44,594 - WARNING - UMLS API returned status 401 for term 'and purulent nasal discharge for 10 days. low-grade fever (up to 100.5°f). no sore throat or hearing loss. pulmonary: no cough or shortness of breath. cardiovascular: no chest pain or palpitations. neurological: mild headache associated with sinus pain'
2025-05-26 06:34:48,792 - WARNING - UMLS API returned status 401 for term 'no dizziness. musculoskeletal: no joint pain or stiffness. gastrointestinal: no nausea or diarrhea. genitourinary: no urinary changes. endocrine: no weight changes or thirst. hematologic: no easy bruising or bleeding. dermatologic: no rashes or lesions. psychiatric: no mood changes. ophthalmologic: no vision changes. primary assessment: symptoms consistent with acute bacterial sinusitis'
2025-05-26 06:34:53,098 - WARNING - UMLS API returned status 401 for term 'likely secondary to recent viral upper respiratory infection. differential includes viral sinusitis or allergic rhinitis. other systems: neurological: headache likely related to sinusitis. endocrine: stable diabetes. cardiovascular: stable hypertension. no acute abnormalities in pulmonary'
2025-05-26 06:36:23,463 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-26 06:36:24,361 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-26 06:36:24,361 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-26 06:36:24,388 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-26 06:36:24,389 - ERROR - Error extracting features for note ID 3: dictionary update sequence element #0 has length 1; 2 is required
2025-05-26 06:36:29,560 - WARNING - UMLS API returned status 401 for term 'patient complains of headache the headache started three days ago. the headache is associated with fevers and chills'
2025-05-26 06:36:33,861 - WARNING - UMLS API returned status 401 for term 'nausea and vomiting and loss of appetite the patient has jaundice in the eyes taking foods with fats makes the nausea worse taking strong tea and licking salt alleviates the nausea'
2025-05-26 06:36:37,960 - WARNING - UMLS API returned status 401 for term 'patient presents with facial pain'
2025-05-26 06:36:42,259 - WARNING - UMLS API returned status 401 for term 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses'
2025-05-26 06:36:46,458 - WARNING - UMLS API returned status 401 for term 'bilateral nasal congestion'
2025-05-26 06:36:50,759 - WARNING - UMLS API returned status 401 for term 'back pain for two weeks the patient reports backpain for three weeks on assessment'
2025-05-26 06:36:54,961 - WARNING - UMLS API returned status 401 for term 'the patient is obese the backpain is made worse by sitting down for long the pain is alleviated by standing and stretching'
2025-05-26 06:36:59,053 - WARNING - UMLS API returned status 401 for term 'and purulent nasal discharge for 10 days. low-grade fever (up to 100.5°f). no sore throat or hearing loss. pulmonary: no cough or shortness of breath. cardiovascular: no chest pain or palpitations. neurological: mild headache associated with sinus pain'
2025-05-26 06:37:03,354 - WARNING - UMLS API returned status 401 for term 'no dizziness. musculoskeletal: no joint pain or stiffness. gastrointestinal: no nausea or diarrhea. genitourinary: no urinary changes. endocrine: no weight changes or thirst. hematologic: no easy bruising or bleeding. dermatologic: no rashes or lesions. psychiatric: no mood changes. ophthalmologic: no vision changes. primary assessment: symptoms consistent with acute bacterial sinusitis'
2025-05-26 06:37:07,553 - WARNING - UMLS API returned status 401 for term 'likely secondary to recent viral upper respiratory infection. differential includes viral sinusitis or allergic rhinitis. other systems: neurological: headache likely related to sinusitis. endocrine: stable diabetes. cardiovascular: stable hypertension. no acute abnormalities in pulmonary'
2025-05-26 06:38:37,402 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-26 06:38:38,319 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-26 06:38:43,301 - WARNING - UMLS API returned status 401 for term 'patient complains of headache the headache started three days ago. the headache is associated with fevers and chills'
2025-05-26 06:38:47,505 - WARNING - UMLS API returned status 401 for term 'nausea and vomiting and loss of appetite the patient has jaundice in the eyes taking foods with fats makes the nausea worse taking strong tea and licking salt alleviates the nausea'
2025-05-26 06:38:53,645 - WARNING - UMLS API returned status 401 for term 'patient presents with facial pain'
2025-05-26 06:38:57,871 - WARNING - UMLS API returned status 401 for term 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses'
2025-05-26 06:39:02,042 - WARNING - UMLS API returned status 401 for term 'bilateral nasal congestion'
2025-05-26 06:39:06,138 - WARNING - UMLS API returned status 401 for term 'back pain for two weeks the patient reports backpain for three weeks on assessment'
2025-05-26 06:39:10,646 - WARNING - UMLS API returned status 401 for term 'the patient is obese the backpain is made worse by sitting down for long the pain is alleviated by standing and stretching'
2025-05-26 06:39:14,873 - WARNING - UMLS API returned status 401 for term 'and purulent nasal discharge for 10 days. low-grade fever (up to 100.5°f). no sore throat or hearing loss. pulmonary: no cough or shortness of breath. cardiovascular: no chest pain or palpitations. neurological: mild headache associated with sinus pain'
2025-05-26 06:39:19,144 - WARNING - UMLS API returned status 401 for term 'no dizziness. musculoskeletal: no joint pain or stiffness. gastrointestinal: no nausea or diarrhea. genitourinary: no urinary changes. endocrine: no weight changes or thirst. hematologic: no easy bruising or bleeding. dermatologic: no rashes or lesions. psychiatric: no mood changes. ophthalmologic: no vision changes. primary assessment: symptoms consistent with acute bacterial sinusitis'
2025-05-26 06:39:23,342 - WARNING - UMLS API returned status 401 for term 'likely secondary to recent viral upper respiratory infection. differential includes viral sinusitis or allergic rhinitis. other systems: neurological: headache likely related to sinusitis. endocrine: stable diabetes. cardiovascular: stable hypertension. no acute abnormalities in pulmonary'
2025-05-26 06:40:47,944 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-26 06:40:48,831 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-26 06:40:48,831 - ERROR - Failed to add symptom rules: "[E001] No component 'medspacy_target_matcher' found in pipeline. Available names: ['sentencizer', 'tok2vec', 'tagger', 'attribute_ruler', 'lemmatizer', 'parser', 'ner']"
2025-05-26 06:40:53,765 - WARNING - UMLS API returned status 401 for term 'patient complains of headache the headache started three days ago. the headache is associated with fevers and chills'
2025-05-26 06:40:58,004 - WARNING - UMLS API returned status 401 for term 'nausea and vomiting and loss of appetite the patient has jaundice in the eyes taking foods with fats makes the nausea worse taking strong tea and licking salt alleviates the nausea'
2025-05-26 06:41:02,367 - WARNING - UMLS API returned status 401 for term 'patient presents with facial pain'
2025-05-26 06:41:06,668 - WARNING - UMLS API returned status 401 for term 'and fever for 10 days. reports purulent nasal discharge. facial pain over maxillary sinuses'
2025-05-26 06:41:10,799 - WARNING - UMLS API returned status 401 for term 'bilateral nasal congestion'
2025-05-26 06:41:15,167 - WARNING - UMLS API returned status 401 for term 'back pain for two weeks the patient reports backpain for three weeks on assessment'
2025-05-26 06:41:19,777 - WARNING - UMLS API returned status 401 for term 'the patient is obese the backpain is made worse by sitting down for long the pain is alleviated by standing and stretching'
2025-05-26 06:41:23,979 - WARNING - UMLS API returned status 401 for term 'and purulent nasal discharge for 10 days. low-grade fever (up to 100.5°f). no sore throat or hearing loss. pulmonary: no cough or shortness of breath. cardiovascular: no chest pain or palpitations. neurological: mild headache associated with sinus pain'
2025-05-26 06:41:28,278 - WARNING - UMLS API returned status 401 for term 'no dizziness. musculoskeletal: no joint pain or stiffness. gastrointestinal: no nausea or diarrhea. genitourinary: no urinary changes. endocrine: no weight changes or thirst. hematologic: no easy bruising or bleeding. dermatologic: no rashes or lesions. psychiatric: no mood changes. ophthalmologic: no vision changes. primary assessment: symptoms consistent with acute bacterial sinusitis'
2025-05-26 06:41:32,371 - WARNING - UMLS API returned status 401 for term 'likely secondary to recent viral upper respiratory infection. differential includes viral sinusitis or allergic rhinitis. other systems: neurological: headache likely related to sinusitis. endocrine: stable diabetes. cardiovascular: stable hypertension. no acute abnormalities in pulmonary'
2025-05-26 06:43:05,586 - ERROR - Failed to initialize NLP pipeline: [E893] Could not find function 'replace_tokenizer' in function registry 'callbacks'. If you're using a custom function, make sure the code is available. If the function is provided by a third-party package, e.g. spacy-transformers, make sure the package is installed in your environment.

Available names: spacy.copy_from_base_model.v1, spacy.models_and_pipes_with_nvtx_range.v1, spacy.models_with_nvtx_range.v1
2025-05-26 06:43:06,464 - WARNING - Using fallback spacy pipeline without parser, ner, or linker
2025-05-26 06:43:06,481 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-26 06:43:06,506 - WARNING - Missing symptoms: ['photophobia']. Initiating knowledge base update.
2025-05-26 06:43:06,507 - ERROR - Invalid text type for aggravating: <class 'departments.models.medicine.SOAPNote'>
2025-05-26 06:43:06,507 - ERROR - Error extracting features for note ID 3: dictionary update sequence element #0 has length 1; 2 is required
2025-05-26 06:43:06,507 - WARNING - Empty text for embedding, skipping embedding-based scoring
2025-05-26 06:43:06,509 - ERROR - Error generating differentials: string indices must be integers, not 'str'
2025-05-26 06:43:06,512 - WARNING - Extracted symptoms do not match expected symptoms: ['headache', 'photophobia']. Using knowledge base fallback.
